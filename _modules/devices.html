<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>devices &mdash; Documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" /><link rel="shortcut icon" href="../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> labjack-unified<img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../LabJackU3.html">LabJackU3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LabJackU6.html">LabJackU6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LabJackT7.html">LabJackT7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Examples/index.html">Examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">labjack-unified</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Module code</a> &raquo;</li>
      <li>devices</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for devices</h1><div class="highlight"><pre>
<span></span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">devices.py contains unified LabJack classes for the U3, U6 and T7.</span>
<span class="sd">A common set of methods is implemented, simplifying writing code for any</span>
<span class="sd">of the devices listed above.</span>

<span class="sd">The classes are built using the existing LabJack python packages:</span>
<span class="sd">    - LabJackPython</span>
<span class="sd">    - labjack-ljm-python</span>

<span class="sd">Note: Use code folding at the method level to improve readability.</span>

<span class="sd">Author: Eduardo Nigro</span>
<span class="sd">    rev 0.0.3</span>
<span class="sd">    2021-12-13</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Importing LJM and LJM classes used in</span>
<span class="c1"># the LabJackT7 class</span>
<span class="kn">from</span> <span class="nn">labjack.ljm</span> <span class="kn">import</span> <span class="n">ljm</span><span class="p">,</span> <span class="n">LJMError</span>

<span class="c1"># Importing LabJackPython classes and functions used in</span>
<span class="c1"># the LabJackU3 and LabJackU6 classes</span>
<span class="kn">import</span> <span class="nn">u3</span><span class="o">,</span> <span class="nn">u6</span>
<span class="kn">import</span> <span class="nn">ctypes</span>
<span class="kn">from</span> <span class="nn">LabJackPython</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">LabJackException</span><span class="p">,</span>
    <span class="n">_loadLibrary</span><span class="p">,</span>
    <span class="n">ePut</span><span class="p">,</span>
    <span class="n">eGet</span><span class="p">,</span>
    <span class="n">AddRequest</span><span class="p">,</span>
    <span class="n">GoOne</span>
<span class="p">)</span>

<span class="c1"># Importing constants used in the LabJackU3 and LabJackU6 classes</span>
<span class="c1"># See LabJackPython.py for more details on each constant</span>
<span class="kn">from</span> <span class="nn">LabJackPython</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">LJ_chALL_CHANNELS</span><span class="p">,</span>
    <span class="n">LJ_chNUMBER_TIMERS_ENABLED</span><span class="p">,</span>
    <span class="n">LJ_chSTREAM_BACKLOG_COMM</span><span class="p">,</span>
    <span class="n">LJ_chSTREAM_BACKLOG_UD</span><span class="p">,</span>
    <span class="n">LJ_chSTREAM_BUFFER_SIZE</span><span class="p">,</span>
    <span class="n">LJ_chSTREAM_SCAN_FREQUENCY</span><span class="p">,</span>
    <span class="n">LJ_chSTREAM_WAIT_MODE</span><span class="p">,</span>
    <span class="n">LJ_chTIMER_CLOCK_BASE</span><span class="p">,</span>
    <span class="n">LJ_chTIMER_CLOCK_DIVISOR</span><span class="p">,</span>
    <span class="n">LJ_chTIMER_COUNTER_PIN_OFFSET</span><span class="p">,</span>
    <span class="n">LJ_ioADD_STREAM_CHANNEL</span><span class="p">,</span>
    <span class="n">LJ_ioCLEAR_STREAM_CHANNELS</span><span class="p">,</span>
    <span class="n">LJ_ioGET_AIN</span><span class="p">,</span>
    <span class="n">LJ_ioGET_AIN_DIFF</span><span class="p">,</span>
    <span class="n">LJ_ioGET_ANALOG_ENABLE_PORT</span><span class="p">,</span>
    <span class="n">LJ_ioGET_CONFIG</span><span class="p">,</span>
    <span class="n">LJ_ioGET_DIGITAL_BIT</span><span class="p">,</span>
    <span class="n">LJ_ioGET_DIGITAL_BIT_DIR</span><span class="p">,</span>
    <span class="n">LJ_ioGET_STREAM_DATA</span><span class="p">,</span>
    <span class="n">LJ_ioGET_TIMER</span><span class="p">,</span>
    <span class="n">LJ_ioPIN_CONFIGURATION_RESET</span><span class="p">,</span>
    <span class="n">LJ_ioPUT_AIN_RANGE</span><span class="p">,</span>
    <span class="n">LJ_ioPUT_ANALOG_ENABLE_BIT</span><span class="p">,</span>
    <span class="n">LJ_ioPUT_ANALOG_ENABLE_PORT</span><span class="p">,</span>
    <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
    <span class="n">LJ_ioPUT_DAC</span><span class="p">,</span>
    <span class="n">LJ_ioPUT_DIGITAL_BIT</span><span class="p">,</span>
    <span class="n">LJ_ioPUT_TIMER_MODE</span><span class="p">,</span>
    <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
    <span class="n">LJ_ioSTART_STREAM</span><span class="p">,</span>
    <span class="n">LJ_ioSTOP_STREAM</span><span class="p">,</span>
    <span class="n">LJ_rgBIP10V</span><span class="p">,</span>
    <span class="n">LJ_rgBIP1V</span><span class="p">,</span>
    <span class="n">LJ_rgBIPP1V</span><span class="p">,</span>
    <span class="n">LJ_rgBIPP01V</span><span class="p">,</span>
    <span class="n">LJ_swNONE</span><span class="p">,</span>
    <span class="n">LJ_tc48MHZ</span><span class="p">,</span>
    <span class="n">LJ_tc48MHZ_DIV</span><span class="p">,</span>
    <span class="n">LJ_tmPWM16</span><span class="p">,</span>
    <span class="n">LJ_tmQUAD</span><span class="p">,</span>
<span class="p">)</span>


<div class="viewcode-block" id="LabJackU3"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3">[docs]</a><span class="k">class</span> <span class="nc">LabJackU3</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The class to represent the LabJack U3.</span>


<span class="sd">    :param serialnum: The device serial number.</span>
<span class="sd">    :type serialnum: int</span>

<span class="sd">    Ports that are made available with this class are listed below.</span>
<span class="sd">    The port names assume a U3-HV.</span>

<span class="sd">        * Analog Output: ``&#39;DAC0&#39;``, ``&#39;DAC1&#39;``</span>
<span class="sd">        * Analog Input: ``&#39;AIN0&#39;``, ``&#39;AIN1&#39;``, ``&#39;AIN2&#39;``, ``&#39;AIN3&#39;``</span>
<span class="sd">        * Flexible I/O: ``&#39;FIO4&#39;``, ``&#39;FIO5&#39;``, ``&#39;FIO6&#39;``, ``&#39;FIO7&#39;``, </span>
<span class="sd">        * Flexible I/O: ``&#39;EIO0&#39;``, ``&#39;EIO1&#39;``, ... , ``&#39;EIO7&#39;``</span>

<span class="sd">    Device-specific methods:</span>

<span class="sd">        * `get_config` - Gets port configuration</span>
<span class="sd">        * `reset_config` - Resets port configuration to factory defaults</span>
<span class="sd">        * `get_bitdir` - Gets digital port bit direction</span>


<span class="sd">    Connect to the first found U3:</span>

<span class="sd">        &gt;&gt;&gt; from labjack_unified.devices import LabJackU3</span>
<span class="sd">        &gt;&gt;&gt; lju3 = LabJackU3()</span>
<span class="sd">        &gt;&gt;&gt; lju3.display_info()</span>
<span class="sd">        &gt;&gt;&gt; lju3.close()</span>

<span class="sd">    You can also connect to a specific device using its serial number:</span>

<span class="sd">        &gt;&gt;&gt; lju3 = LabJackU3(320012345)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># CONSTRUCTOR METHODS</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serialnum</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Class constructor</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_staticlib</span> <span class="o">=</span> <span class="n">_loadLibrary</span><span class="p">()</span>
        <span class="c1"># Attempting to open the device</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">serialnum</span><span class="p">:</span>
                <span class="c1"># Opens LabJack with specific serial number</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span> <span class="o">=</span> <span class="n">u3</span><span class="o">.</span><span class="n">U3</span><span class="p">(</span><span class="n">autoOpen</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">serial</span><span class="o">=</span><span class="n">serialnum</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Opens first available LabJack</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span> <span class="o">=</span> <span class="n">u3</span><span class="o">.</span><span class="n">U3</span><span class="p">(</span><span class="n">autoOpen</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">LabJackException</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_numports</span> <span class="o">=</span> <span class="mi">16</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_assign_info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">configU3</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_assign_ports</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset_config</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Opened LabJack&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serialnum</span><span class="p">)</span>

<div class="viewcode-block" id="LabJackU3.close"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the U3 device connection.</span>

<span class="sd">        &gt;&gt;&gt; lju3.close()</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_staticlib</span><span class="o">.</span><span class="n">Close</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Closed LabJack&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serialnum</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU3.display_info"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.display_info">[docs]</a>    <span class="k">def</span> <span class="nf">display_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Display a summary with the U3 device information.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;____________________________________________________________&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Device Name........&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Serial Number......&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serialnum</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hardware Version...&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hardware</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Firmware Version...&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_firmware</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Connection Type....&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;____________________________________________________________&#39;</span><span class="p">)</span></div>

    <span class="c1"># I/O METHODS</span>
<div class="viewcode-block" id="LabJackU3.set_config"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.set_config">[docs]</a>    <span class="k">def</span> <span class="nf">set_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the LabJack flexible IO port configuration.</span>


<span class="sd">        :param name: The port name to configure.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :param config:  The configuration option. </span>
<span class="sd">            If `name` is ``&#39;ALL&#39;`` a string of mask bits for all 16 ports</span>
<span class="sd">            is used. For single port, `config` can be either a string</span>
<span class="sd">            ``&#39;analog&#39;`` or ``&#39;digital&#39;``. Alternativelly, 1 or 0 can be used.</span>
<span class="sd">        :type config: str, int</span>


<span class="sd">        Configure flexible ports ``&#39;FIO4&#39;`` and ``&#39;FIO5&#39;`` as analog:</span>

<span class="sd">            &gt;&gt;&gt; lju3.set_config(&#39;FIO4&#39;, &#39;analog&#39;)</span>
<span class="sd">            &gt;&gt;&gt; lju3.set_config(&#39;FIO5&#39;, 1)</span>

<span class="sd">        Configure flexible ports ``&#39;EIO0&#39;`` and ``&#39;EIO1&#39;`` as digital:</span>
<span class="sd">            </span>
<span class="sd">            &gt;&gt;&gt; lju3.set_config(&#39;EIO0&#39;, &#39;digital&#39;)</span>
<span class="sd">            &gt;&gt;&gt; lju3.set_config(&#39;EIO1&#39;, 0)</span>

<span class="sd">        Configure flexible ports ``&#39;EI01&#39;`` and ``&#39;EI03&#39;`` as analog and</span>
<span class="sd">        ports ``&#39;AIN0&#39;`` to ``&#39;AIN3&#39;`` to analog (if a U3-LV is used):</span>

<span class="sd">        &gt;&gt;&gt; lju3.set_config(&#39;ALL&#39;, &#39;0000101000001111&#39;)</span>

<span class="sd">        .. note::</span>
<span class="sd">            1. LSB (Least Significant Bit) is port ``&#39;AIN0&#39;``.</span>
<span class="sd">            2. On a U3-HV, the first 4 ports are always analog and the first 4 LSB settings are ignored.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="c1"># Checking for correct mask string length</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">config</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numports</span><span class="p">:</span>
                <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_ANALOG_ENABLE_PORT</span><span class="p">,</span>
                     <span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numports</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;ALL&#39; ports CONFIG must be 16-bit string.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Checking for valid input port names</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;AIN&quot;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid flexible IO port name.&#39;</span><span class="p">)</span>
            <span class="c1"># Checking for valid configuration options</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">config</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;analog&#39;</span><span class="p">:</span>
                    <span class="n">config</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;digital&#39;</span><span class="p">:</span>
                    <span class="n">config</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="s2">&quot;Port configuration must be either &#39;DIGITAL&#39; or &#39;ANALOG&#39;.&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">config</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">config</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Port configuration must be either 0 or 1&#39;</span><span class="p">)</span>
            <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_ANALOG_ENABLE_BIT</span><span class="p">,</span>
                 <span class="bp">self</span><span class="o">.</span><span class="n">_get_AINnumber</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="n">config</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU3.get_config"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.get_config">[docs]</a>    <span class="k">def</span> <span class="nf">get_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ALL&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the LabJack flexible IO port configuration.</span>


<span class="sd">        :param name: The port name to get the configuration.</span>
<span class="sd">            If `name` is ``&#39;ALL&#39;`` a dictionary with keys `EIOAnalog` and</span>
<span class="sd">            `FIOAnalog` is returned.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :returns: For single port `name`, an integer is returned, where </span>
<span class="sd">            `1=Analog` and `0=Digital`. If `name` is ``&#39;ALL&#39;`` a dictionary</span>
<span class="sd">            containing the bit mask string for the `EIO` and `FIO` ports is</span>
<span class="sd">            returned. The least significant bit (LSB) of the `EIO` and `FIO`</span>
<span class="sd">            bit strings correspond respectively to ports ``&#39;EIO0&#39;`` and</span>
<span class="sd">            ``&#39;FIO0&#39;``.</span>
<span class="sd">        :rtype: int, dict</span>


<span class="sd">        Get flexible port configuration:</span>

<span class="sd">            &gt;&gt;&gt; lju3.get_config()</span>

<span class="sd">        .. note::</span>
<span class="sd">            In the case of a LabJack U3-HV, the four LSBs of the `FIO` ports</span>
<span class="sd">            are always `1s`. They correspond to the always analog ports</span>
<span class="sd">            ``&#39;AIN0&#39;`` to ``&#39;AIN3&#39;``.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioGET_ANALOG_ENABLE_PORT</span><span class="p">,</span>
                    <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numports</span><span class="p">)</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:016b}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">mask</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;EIOAnalog&#39;</span><span class="p">:</span> <span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">8</span><span class="p">],</span>
                <span class="s1">&#39;FIOAnalog&#39;</span><span class="p">:</span> <span class="n">mask</span><span class="p">[</span><span class="mi">8</span><span class="p">::]</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;AIN&quot;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid flexible IO port name.&#39;</span><span class="p">)</span>
            <span class="n">config</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">mask</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_numports</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_AINnumber</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">config</span></div>

<div class="viewcode-block" id="LabJackU3.reset_config"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.reset_config">[docs]</a>    <span class="k">def</span> <span class="nf">reset_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the flexible IO ports to default all digital.</span>

<span class="sd">            &gt;&gt;&gt; lju3.reset_config()</span>

<span class="sd">        .. note::</span>
<span class="sd">            On the LabJack U3-HV the first 4 ports ``&#39;AIN0&#39;`` to ``&#39;AIN3&#39;``</span>
<span class="sd">            are always analog.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPIN_CONFIGURATION_RESET</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU3.set_digital"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.set_digital">[docs]</a>    <span class="k">def</span> <span class="nf">set_digital</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write the digital state to an output port.</span>
<span class="sd">        It also sets the port direction to output.</span>


<span class="sd">        :param name: The port name to set the state.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :param state: The digital state `0 = Low`, `1 = High`.</span>
<span class="sd">        :type state: int</span>


<span class="sd">        Set port ``&#39;FIO4&#39;`` output to high and port ``&#39;FIO5&#39;`` to low:</span>

<span class="sd">            &gt;&gt;&gt; lju3.set_digital(&#39;FIO4&#39;, 1)</span>
<span class="sd">            &gt;&gt;&gt; lju3.set_digital(&#39;FIO5&#39;, 0)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Checking for valid inputs</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;AIN&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid flexible IO port name.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">state</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">state</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Port state must be either 1 or 0&#39;</span><span class="p">)</span>
        <span class="c1"># Setting port state by port number</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_DIGITAL_BIT</span><span class="p">,</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">_get_AINnumber</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="n">state</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU3.get_digital"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.get_digital">[docs]</a>    <span class="k">def</span> <span class="nf">get_digital</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read the digital state from an input port.</span>
<span class="sd">        It also sets the port direction to input.</span>


<span class="sd">        :param name: The port name to get the state.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :returns: The state of the digital port. `0 = Low`, `1 = High`.</span>
<span class="sd">        :rtype: int</span>


<span class="sd">        Get port ``&#39;FIO6&#39;`` input state:</span>

<span class="sd">            &gt;&gt;&gt; lju3.get_digital(&#39;FIO6&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Checking for valid inputs</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;AIN&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid flexible IO port name.&#39;</span><span class="p">)</span>
        <span class="c1"># Getting port state by port number</span>
        <span class="n">state</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioGET_DIGITAL_BIT</span><span class="p">,</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">_get_AINnumber</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">state</span></div>

<div class="viewcode-block" id="LabJackU3.get_bitdir"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.get_bitdir">[docs]</a>    <span class="k">def</span> <span class="nf">get_bitdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read the direction of the digital port.</span>


<span class="sd">        :param name: The port name to get the direction.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :returns: The direction of the digital port. `Input` or `Output`.</span>
<span class="sd">        :rtype: str</span>


<span class="sd">        Get the direction of port ``&#39;FIO6&#39;``:</span>

<span class="sd">            &gt;&gt;&gt; lju3.get_bitdir(&#39;FIO6&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Checking for valid input port names</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;AIN&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid analog input port name.&#39;</span><span class="p">)</span>
        <span class="c1"># Getting digital port bit direction</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioGET_DIGITAL_BIT_DIR</span><span class="p">,</span>
                     <span class="bp">self</span><span class="o">.</span><span class="n">_get_AINnumber</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">bitdir</span> <span class="o">=</span> <span class="s1">&#39;input&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bitdir</span> <span class="o">=</span> <span class="s1">&#39;output&#39;</span>
        <span class="k">return</span> <span class="n">bitdir</span></div>

<div class="viewcode-block" id="LabJackU3.set_analog"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.set_analog">[docs]</a>    <span class="k">def</span> <span class="nf">set_analog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set analog output voltage.</span>


<span class="sd">        :param name: The port name to set the output voltage.</span>
<span class="sd">            Available ports are ``&#39;DAC0&#39;`` and ``&#39;DAC1&#39;``.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :param value: The output voltage between ``0`` and ``5`` V.</span>
<span class="sd">        :type value: float</span>


<span class="sd">        Set port ``&#39;DAC1&#39;`` output voltage to ``2.2`` V:</span>

<span class="sd">            &gt;&gt;&gt; lju3.set_analog(&#39;DAC1&#39;, 2.2)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Checking for valid input port names</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;DAC&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid analog output port name.&#39;</span><span class="p">)</span>
        <span class="c1"># Getting corresponding port number</span>
        <span class="n">DACnumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_DACnumber</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="c1"># Limiting analog values</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># Setting analog port output voltage</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_DAC</span><span class="p">,</span> <span class="n">DACnumber</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU3.get_analog"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.get_analog">[docs]</a>    <span class="k">def</span> <span class="nf">get_analog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">namepos</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get analog input voltage.</span>


<span class="sd">        :param name: The positive port name to get the voltage.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :param args: Can be one of the three options:</span>

<span class="sd">            * ``&#39;single-ended&#39;`` (default value)</span>
<span class="sd">            * The negative port name to get a differential voltage.</span>
<span class="sd">            * ``&#39;special&#39;`` to get increased range on the voltage reading.</span>

<span class="sd">        :type args: str</span>

<span class="sd">        :returns: The input voltage value.</span>

<span class="sd">            * On a U3-HV, the range for ports ``&#39;AIN0&#39;`` to ``&#39;AIN3&#39;`` is +/-10 V</span>
<span class="sd">            * On a U3-HV, ``&#39;special&#39;`` enables a range of -10 to +20 V</span>
<span class="sd">            * `FIO` ports have a range of +/- 2.4 V</span>
<span class="sd">            * `FIO` ports using ``&#39;special&#39;`` have a range of 0 to 3.6 V</span>

<span class="sd">        :rtype: float</span>


<span class="sd">        Get single-ended voltage on port ``&#39;FIO2&#39;``:</span>

<span class="sd">            &gt;&gt;&gt; lju3.get_analog(&#39;FIO2&#39;)</span>

<span class="sd">        Get differential voltage betweens ports ``&#39;AIN0&#39;`` and ``&#39;AIN1&#39;``:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; lju3.get_analog(&#39;AIN0&#39;, &#39;AIN1&#39;)</span>

<span class="sd">        Get special range voltage on port ``&#39;FIO3&#39;``:</span>

<span class="sd">            &gt;&gt;&gt; lju3.get_analog(&#39;FIO3&#39;, &#39;special&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Checking for differential measurement</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">nameneg</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nameneg</span> <span class="o">=</span> <span class="s1">&#39;single-ended&#39;</span>
        <span class="c1"># Checking for valid input port names</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">([</span><span class="n">namepos</span><span class="p">,</span> <span class="n">nameneg</span><span class="p">],</span> <span class="s2">&quot;AIN&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid analog input port name.&#39;</span><span class="p">)</span>
        <span class="c1"># Getting corresponding port numbers</span>
        <span class="n">AINpos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_AINnumber</span><span class="p">(</span><span class="n">namepos</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nameneg</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;single-ended&#39;</span><span class="p">:</span>
            <span class="n">AINneg</span> <span class="o">=</span> <span class="mi">31</span>
        <span class="k">elif</span> <span class="n">nameneg</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;special&#39;</span><span class="p">:</span>
            <span class="n">AINneg</span> <span class="o">=</span> <span class="mi">32</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">AINneg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_AINnumber</span><span class="p">(</span><span class="n">nameneg</span><span class="p">)</span>
        <span class="c1"># Getting analog input voltage</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
                        <span class="n">LJ_ioGET_AIN_DIFF</span><span class="p">,</span> <span class="n">AINpos</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">AINneg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span></div>

    <span class="c1"># STREAMING METHODS</span>
<div class="viewcode-block" id="LabJackU3.set_stream"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.set_stream">[docs]</a>    <span class="k">def</span> <span class="nf">set_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">scanrate</span><span class="o">=</span><span class="mi">50000</span><span class="p">,</span> <span class="n">readrate</span><span class="o">=</span><span class="mf">0.5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set and start data streaming.</span>


<span class="sd">        :param name: The port name (or list of names) to be streamed.</span>
<span class="sd">        :type name: str, list(str)</span>

<span class="sd">        :param scanrate:  The scan rate (Hz) of the data streaming. </span>
<span class="sd">            The default (and maximum) value is ``50000`` Hz. The effective scan</span>
<span class="sd">            frequency of each port is the scan rate divided by the number of</span>
<span class="sd">            scanned ports.</span>
<span class="sd">        :type scanrate: int</span>

<span class="sd">        :param readrate:</span>
<span class="sd">            The rate in seconds at which blocks of data are retrieved from the</span>
<span class="sd">            data buffer. The default value is ``0.5`` seconds.</span>
<span class="sd">        :type readrate: float</span>


<span class="sd">        Set data streaming on port ``&#39;AIN0&#39;`` at ``25000`` Hz, every ``0.5`` s:</span>
<span class="sd">            </span>
<span class="sd">            &gt;&gt;&gt; lju3.set_stream(&#39;AIN0&#39;, scanrate=25000, readrate=0.5)</span>

<span class="sd">        Set data streaming on ports ``&#39;AIN0&#39;`` and ``&#39;AIN1&#39;`` at ``50000`` Hz,</span>
<span class="sd">        every ``1.0`` s:</span>

<span class="sd">            &gt;&gt;&gt; lju3.set_stream([&#39;AIN0&#39;, &#39;AIN1&#39;], scanrate=50000, readrate=1.0)</span>

<span class="sd">        .. note::</span>
<span class="sd">            Only analog input ports ``&#39;AIN0&#39;`` to ``&#39;AIN3&#39;`` can be</span>
<span class="sd">            streamed. Hence, a Labjack U3-HV has to be used. While it&#39;s</span>
<span class="sd">            possible to stream digital ports, that hasn&#39;t been implemented</span>
<span class="sd">            in this release.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Assigning streamed data block read-in rate (s)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streamreadrate</span> <span class="o">=</span> <span class="n">readrate</span>
        <span class="c1"># Assigning buffer size as 2 times block length (s)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streambuffersize</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_streamreadrate</span>
        <span class="c1"># Assigning data block scan rate (Hz)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scanrate</span> <span class="o">=</span> <span class="n">scanrate</span>
        <span class="c1"># Checking for valid input port names</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="s2">&quot;AIN&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid input port name.&#39;</span><span class="p">)</span>
        <span class="c1"># Getting port numbers</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">names</span><span class="p">]</span>
        <span class="n">portnum</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
            <span class="n">portnum</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_AINnumber</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
        <span class="c1"># Assigning number of streaming ports</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streamnumchannels</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">portnum</span><span class="p">)</span>
        <span class="c1"># Updating scan frequency per port (Hz)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streamscanfreq</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_scanrate</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_streamnumchannels</span><span class="p">)</span>
        <span class="c1"># Clearing streaming ports</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioCLEAR_STREAM_CHANNELS</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Adding ports to scan list</span>
        <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">portnum</span><span class="p">:</span>
            <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioADD_STREAM_CHANNEL</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Assigning scanning frequency</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
             <span class="n">LJ_chSTREAM_SCAN_FREQUENCY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamscanfreq</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Assigning buffer size</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span> <span class="n">LJ_chSTREAM_BUFFER_SIZE</span><span class="p">,</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">_scanrate</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_streambuffersize</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Configuring reads to retrieve whatever data is available without waiting</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
             <span class="n">LJ_chSTREAM_WAIT_MODE</span><span class="p">,</span> <span class="n">LJ_swNONE</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Starting streaming</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioSTART_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU3.stop_stream"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.stop_stream">[docs]</a>    <span class="k">def</span> <span class="nf">stop_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stop data streaming.</span>

<span class="sd">            &gt;&gt;&gt; lju3.stop_stream()</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioSTOP_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU3.get_stream"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.get_stream">[docs]</a>    <span class="k">def</span> <span class="nf">get_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get streaming data block.</span>


<span class="sd">        :returns: 5-tuple</span>

<span class="sd">            * dt</span>
<span class="sd">            </span>
<span class="sd">                The sampling period (s) between each data point.</span>

<span class="sd">            * data</span>

<span class="sd">                The numpy `m-by-n` array containing the streamed data where</span>
<span class="sd">                `m` is the number of samples per port in the block and `n`</span>
<span class="sd">                is the number of ports defined in `set_stream`</span>

<span class="sd">            * numscans</span>
<span class="sd">            </span>
<span class="sd">                The actual number of scans per port in the data block.</span>

<span class="sd">            * commbacklog</span>
<span class="sd">            </span>
<span class="sd">                The communication backlog in % (increasing values indicate that</span>
<span class="sd">                the computer cannot keep up with the data download from the U3</span>
<span class="sd">                driver)</span>

<span class="sd">            * devbacklog</span>
<span class="sd">            </span>
<span class="sd">                The U3 device backlog in % (increasing values indicate that the</span>
<span class="sd">                device cannot keep up with the data streaming - usually not</span>
<span class="sd">                the case)</span>

<span class="sd">        :rtype: (float, ndarray, int, float, float)</span>


<span class="sd">        Retrieve scan period, data, and scan info:</span>

<span class="sd">            &gt;&gt;&gt; dt, datablock, numscans, commbacklog, U3backlog = lju3.get_stream()</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Defining initial number of samples per channnel</span>
        <span class="c1"># (double the size for safety)</span>
        <span class="n">numscans</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamreadrate</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamscanfreq</span>
        <span class="c1"># Preallocating output array</span>
        <span class="n">datasamples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">numscans</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_streamnumchannels</span><span class="p">)</span>
        <span class="n">numscansactual</span><span class="p">,</span> <span class="n">datalong</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_eGetArray</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioGET_STREAM_DATA</span><span class="p">,</span>
            <span class="n">LJ_chALL_CHANNELS</span><span class="p">,</span> <span class="n">numscans</span><span class="p">,</span> <span class="n">datasamples</span><span class="p">)</span>
        <span class="c1"># Separating ports</span>
        <span class="n">numscansactual</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numscansactual</span><span class="p">)</span>
        <span class="n">nrow</span> <span class="o">=</span> <span class="n">numscansactual</span>
        <span class="n">ncol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamnumchannels</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">datalong</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">nrow</span><span class="o">*</span><span class="n">ncol</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nrow</span><span class="p">,</span> <span class="n">ncol</span><span class="p">)</span>
        <span class="c1"># Calculating sample period (s)</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_streamscanfreq</span>
        <span class="c1"># Calculating communication backlog (%)</span>
        <span class="n">commbacklog</span> <span class="o">=</span> <span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
                           <span class="n">LJ_ioGET_CONFIG</span><span class="p">,</span> <span class="n">LJ_chSTREAM_BACKLOG_COMM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">commbacklog</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">commbacklog</span><span class="o">/</span><span class="n">numscansactual</span>
        <span class="c1"># Calculating LabJack device backlog (%)</span>
        <span class="n">devbacklog</span> <span class="o">=</span> <span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
                          <span class="n">LJ_ioGET_CONFIG</span><span class="p">,</span> <span class="n">LJ_chSTREAM_BACKLOG_UD</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">devbacklog</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">devbacklog</span><span class="o">/</span><span class="n">numscansactual</span>
        <span class="c1"># Returning streamed data block parameters</span>
        <span class="k">return</span> <span class="n">dt</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">numscansactual</span><span class="p">,</span> <span class="n">commbacklog</span><span class="p">,</span> <span class="n">devbacklog</span></div>

    <span class="c1"># PWM METHODS</span>
<div class="viewcode-block" id="LabJackU3.set_pwm"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.set_pwm">[docs]</a>    <span class="k">def</span> <span class="nf">set_pwm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pwmnum</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">dirport1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dirport2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="mi">366</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configure PWM output.</span>


<span class="sd">        :param pwmnum: The number of PWM output signals.</span>
<span class="sd">            ``1`` or ``2`` PWMs can be used. For one PWM, the output port is</span>
<span class="sd">            ``&#39;FIO4&#39;``. For two PWMs, the output ports are ``&#39;FIO4&#39;`` and </span>
<span class="sd">            ``&#39;FIO5&#39;``.</span>
<span class="sd">        :type pwmnum: int</span>

<span class="sd">        :param dirport1: The type of ports that control the PWM `direction`</span>
<span class="sd">            for electric motor control. There are three options:</span>

<span class="sd">            * ``None``  - Default value (no direction ports are used)</span>
<span class="sd">            * ``&#39;DAC&#39;`` - Uses analog ports ``&#39;DAC0&#39;`` and ``&#39;DAC1&#39;``</span>
<span class="sd">            * ``&#39;DIO&#39;`` - Uses digital ports ``&#39;FIO6&#39;`` and ``&#39;FIO7&#39;``</span>

<span class="sd">        :type dirport1: None, str</span>

<span class="sd">        :param dirport2: Same as `dirport1`.</span>
<span class="sd">            It&#39;s used when two PWM outputs are enabled. The ``&#39;DAC&#39;`` option</span>
<span class="sd">            can only be used for one set of direction ports, unless the two</span>
<span class="sd">            motors are running synchronously. For the ``&#39;DIO&#39;`` option,</span>
<span class="sd">            digital ports ``&#39;EIO0&#39;`` and ``&#39;EIO1&#39;`` are used.</span>
<span class="sd">        :type dirport2: None, str</span>

<span class="sd">        :param frequency: The PWM signal frequency in Hz.</span>
<span class="sd">            In the case of two PWMs, both will have the same frequency. Valid</span>
<span class="sd">            values are ``183``, ``366`` or ``732``.</span>
<span class="sd">        :type frequency: int</span>


<span class="sd">        Set 1 PWM for motor control on ``&#39;FIO4&#39;`` with direction ports on</span>
<span class="sd">        ``&#39;DAC0&#39;`` and ``&#39;DAC1&#39;``. The PWM frequency is the default ``366`` Hz:</span>

<span class="sd">            &gt;&gt;&gt; lju3.set_pwm(dirport1=&#39;DAC&#39;)</span>

<span class="sd">        Set 2 PWMs on ports ``&#39;FIO4&#39;`` and ``&#39;FIO5&#39;`` with a frequency of</span>
<span class="sd">        ``183`` Hz:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; lju3.set_pwm(pwmnum=2, frequency=183)</span>

<span class="sd">        Set 2 PWMs for motor control on ports ``&#39;FIO4&#39;`` and ``&#39;FIO5&#39;``, using</span>
<span class="sd">        the digital ports ``&#39;FIO6&#39;`` and ``&#39;FIO7&#39;`` for motor 1 direction, and</span>
<span class="sd">        ``&#39;EIO0&#39;`` and ``&#39;EIO1&#39;`` for motor 2 direction. The PWM frequency is</span>
<span class="sd">        ``732`` Hz:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; lju3.set_pwm(pwmnum=2, dirport1=&#39;DIO&#39;, dirport2=&#39;DIO&#39;, frequency=732)</span>


<span class="sd">        .. note::</span>
<span class="sd">            When using digital ports, a 10 kOhm resistor has to be connected from</span>
<span class="sd">            the LabJack `VS` port to each one of the `DIO` ports to ensure true</span>
<span class="sd">            `high` and `low` states.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Defining PWM frequency divisors and checking input</span>
        <span class="n">pwmfreq</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;183&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s1">&#39;366&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;732&#39;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">frequency</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">pwmfreq</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Valid PWM frequencies are 183, 366, and 732 Hz.&quot;</span><span class="p">)</span>
        <span class="c1"># Checking number of PWM outputs and direction ports</span>
        <span class="n">dirport</span> <span class="o">=</span> <span class="p">[</span><span class="n">dirport1</span><span class="p">,</span> <span class="n">dirport2</span><span class="p">]</span>
        <span class="n">pwmname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;FIO4&#39;</span><span class="p">]</span>
        <span class="n">pwmdir</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;DAC&#39;</span><span class="p">:</span>
            <span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;DAC0&#39;</span><span class="p">,</span> <span class="s1">&#39;DAC1&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;DIO&#39;</span><span class="p">:</span>
            <span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;FIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO7&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">pwmnum</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">pwmname</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;FIO5&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">pwmdir</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;DAC&#39;</span><span class="p">:</span>
                <span class="n">pwmdir</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;DAC0&#39;</span><span class="p">,</span> <span class="s1">&#39;DAC1&#39;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;DIO&#39;</span><span class="p">:</span>
                <span class="n">pwmdir</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;EIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO1&#39;</span><span class="p">])</span>
        <span class="c1"># Assigning PWM attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmnum</span> <span class="o">=</span> <span class="n">pwmnum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmname</span> <span class="o">=</span> <span class="n">pwmname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmdir</span> <span class="o">=</span> <span class="n">pwmdir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmfreq</span> <span class="o">=</span> <span class="n">frequency</span>
        <span class="c1"># Assinging frequency divisor</span>
        <span class="n">divisor</span> <span class="o">=</span> <span class="n">pwmfreq</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">frequency</span><span class="p">)]</span>
        <span class="c1"># Assigning PWM pin offset</span>
        <span class="c1"># (always 4 since the timers always start on FIO4)</span>
        <span class="n">pinoffset</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="c1"># Resetting pin configuration</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPIN_CONFIGURATION_RESET</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Setting the pin offset for the timers</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chTIMER_COUNTER_PIN_OFFSET</span><span class="p">,</span> <span class="n">pinoffset</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Configuring the timer clock to 48 MHz</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chTIMER_CLOCK_BASE</span><span class="p">,</span> <span class="n">LJ_tc48MHZ_DIV</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Setting clock Divisor</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chTIMER_CLOCK_DIVISOR</span><span class="p">,</span> <span class="n">divisor</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Enabling 1 or 2 timers</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chNUMBER_TIMERS_ENABLED</span><span class="p">,</span> <span class="n">pwmnum</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pwmnum</span><span class="p">):</span>
            <span class="c1"># Setting timer to 16 bits</span>
            <span class="c1"># Frequency = (48MHz/Divisor ) / 2^16 Hz</span>
            <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_MODE</span><span class="p">,</span>
                    <span class="n">num</span><span class="p">,</span> <span class="n">LJ_tmPWM16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1"># Setting timer duty cycle to 0%</span>
            <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                    <span class="n">num</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Sending command sequence</span>
        <span class="n">GoOne</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU3.set_dutycycle"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.set_dutycycle">[docs]</a>    <span class="k">def</span> <span class="nf">set_dutycycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">brake1</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">brake2</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set PWM duty cycle value.</span>


<span class="sd">        :param value1: The PWM 1 duty cycle percent value between ``-100``</span>
<span class="sd">            and ``100``.</span>
<span class="sd">        :type value1: float</span>

<span class="sd">        :param value2: The PWM 2 duty cycle percent value between ``-100``</span>
<span class="sd">            and ``100``.</span>
<span class="sd">        :type value2: float</span>

<span class="sd">        :param brake1: The motor 1 brake option used when dutycycle is zero.</span>
<span class="sd">            Brake is applied when ``True``. Motor is floating when ``False``.</span>
<span class="sd">        :type brake1: bool</span>

<span class="sd">        :param brake2: The motor 2 brake option used when dutycycle is zero.</span>
<span class="sd">            Brake is applied when ``True``. Motor is floating when ``False``.</span>
<span class="sd">        :type brake2: bool</span>


<span class="sd">        Set duty cycle to ``50`` % on PWM 1:</span>

<span class="sd">            &gt;&gt;&gt; lju3.set_dutycycle(value1=50)</span>

<span class="sd">        Set duty cycle to ``25`` % (reverse rotation) on PWM 2:</span>

<span class="sd">            &gt;&gt;&gt; lju3.set_dutycycle(value2=-25)</span>

<span class="sd">        Set duty cycle to ``20`` % and ``40`` % on PWMs 1 and 2:</span>
<span class="sd">  </span>
<span class="sd">            &gt;&gt;&gt; lju3.set_dutycycle(value1=20, value2=40)</span>

<span class="sd">        Stop motor 2 and apply brake:</span>

<span class="sd">            &gt;&gt;&gt; lju3.set_dutycycle(value2=0, brake2=True)</span>


<span class="sd">        .. note::</span>
<span class="sd">            1. Avoid suddenly switching the direction of rotation to avoid damaging the motor.</span>
<span class="sd">            2. You can use the brake option True to hold the motor in position.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">value1</span><span class="p">,</span> <span class="n">value2</span><span class="p">]</span>
        <span class="n">brakes</span> <span class="o">=</span> <span class="p">[</span><span class="n">brake1</span><span class="p">,</span> <span class="n">brake2</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">pwmnum</span><span class="p">,</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">brake</span><span class="p">,</span> <span class="n">pwmdir</span><span class="p">,</span> <span class="n">pwmtype</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span>
            <span class="n">values</span><span class="p">,</span> <span class="n">brakes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pwmdir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span><span class="p">)):</span>

            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Applying bounds to inputs</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="mi">100</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">100</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100</span>
                <span class="c1"># Applying PWM direction</span>
                <span class="k">if</span> <span class="n">pwmdir</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="c1"># Forward rotation</span>
                        <span class="k">if</span> <span class="n">pwmtype</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">4.5</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">get_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="k">elif</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="c1"># Reverse rotation</span>
                        <span class="k">if</span> <span class="n">pwmtype</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">4.5</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">get_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="c1"># Brake stop</span>
                        <span class="k">if</span> <span class="n">brake</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">pwmtype</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">pwmtype</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">4.5</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">4.5</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">get_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">get_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="c1"># Calculating duty cycle</span>
                <span class="n">dutycycle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="mi">65535</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span>

                <span class="c1"># Setting timer duty cycle to desired value</span>
                <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                            <span class="n">pwmnum</span><span class="p">,</span> <span class="n">dutycycle</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Sending command sequence</span>
        <span class="n">GoOne</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span></div>

    <span class="c1"># QUADRATURE ENCODER METHODS</span>
<div class="viewcode-block" id="LabJackU3.set_quadrature"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.set_quadrature">[docs]</a>    <span class="k">def</span> <span class="nf">set_quadrature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zphase1</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configure quadrature encoder input on ports ``&#39;FIO4&#39;`` and ``&#39;FIO5&#39;``.</span>


<span class="sd">        :param zphase1: The logic value indicating if a `Z` phase reference</span>
<span class="sd">            pulse is used on port ``&#39;FIO6&#39;``. </span>
<span class="sd">        :type zphase1: bool</span>


<span class="sd">        Set ports ``&#39;FIO4&#39;`` and ``&#39;FIO5&#39;`` for encoder phase `A` and `B`</span>
<span class="sd">        signals:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; lju3.set_quadrature()</span>

<span class="sd">        Set ports ``&#39;FIO4&#39;`` and ``&#39;FIO5&#39;`` for encoder phase `A` and `B`</span>
<span class="sd">        signals and port ``&#39;FIO6&#39;`` for the reference `Z` phase:</span>
<span class="sd">            </span>
<span class="sd">            &gt;&gt;&gt; lju3.set_quadrature(zphase1=True)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Checking input arguments</span>
        <span class="n">quadnameAB</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;FIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO5&#39;</span><span class="p">]</span>
        <span class="n">portnumZ</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">zphase1</span><span class="p">:</span>
            <span class="n">portnumZ</span> <span class="o">=</span> <span class="mi">32768</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_AINnumber</span><span class="p">(</span><span class="s1">&#39;FIO6&#39;</span><span class="p">)</span>
        <span class="c1"># Assigning A-B port names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zphase1</span> <span class="o">=</span> <span class="n">zphase1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_quadnameAB</span> <span class="o">=</span> <span class="n">quadnameAB</span>
        <span class="c1"># Assigning quadrature port pin offset</span>
        <span class="n">pinoffset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_AINnumber</span><span class="p">(</span><span class="n">quadnameAB</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="c1"># Resetting pin configuration</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPIN_CONFIGURATION_RESET</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Setting the pin offset for the timers</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chTIMER_COUNTER_PIN_OFFSET</span><span class="p">,</span> <span class="n">pinoffset</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Configuring the timer clock to 48 MHz</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chTIMER_CLOCK_BASE</span><span class="p">,</span> <span class="n">LJ_tc48MHZ</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Enabling 2 timers</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chNUMBER_TIMERS_ENABLED</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Setting quadrature mode</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_MODE</span><span class="p">,</span>
                   <span class="mi">0</span><span class="p">,</span> <span class="n">LJ_tmQUAD</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_MODE</span><span class="p">,</span>
                   <span class="mi">1</span><span class="p">,</span> <span class="n">LJ_tmQUAD</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Setting timer values to add Z port (or reset in case there&#39;s no Z)</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                    <span class="mi">0</span><span class="p">,</span> <span class="n">portnumZ</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                    <span class="mi">1</span><span class="p">,</span> <span class="n">portnumZ</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Sending command sequence</span>
        <span class="n">GoOne</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU3.get_counter"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.get_counter">[docs]</a>    <span class="k">def</span> <span class="nf">get_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get current quadrature counter value.</span>


<span class="sd">        :returns: The counter value.</span>
<span class="sd">        :rtype: int</span>

<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; lju3.get_counter()</span>


<span class="sd">        .. note::</span>
<span class="sd">            Because the qudrature counter counts rising and falling edges</span>
<span class="sd">            of phases `A` and `B`, a 1024 pulse/rev encoder will generate 4096</span>
<span class="sd">            counts for a full shaft turn.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioGET_TIMER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">value</span></div>

<div class="viewcode-block" id="LabJackU3.reset_counter"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.reset_counter">[docs]</a>    <span class="k">def</span> <span class="nf">reset_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset quadrature counter value.</span>

<span class="sd">            &gt;&gt;&gt; lju3.reset_counter()</span>

<span class="sd">        .. note::</span>
<span class="sd">            The count is only reset when a `Z` phase isn&#39;t being used.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zphase1</span><span class="p">:</span>
            <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                       <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                       <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1"># Sending command sequence</span>
            <span class="n">GoOne</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span></div>

    <span class="c1"># OTHER METHODS</span>
<div class="viewcode-block" id="LabJackU3.get_labjacktemp"><a class="viewcode-back" href="../LabJackU3.html#devices.LabJackU3.get_labjacktemp">[docs]</a>    <span class="k">def</span> <span class="nf">get_labjacktemp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get ambient temperature from LabJack&#39;s internal sensor.</span>


<span class="sd">        :param unit: The temperature measurement unit.</span>
<span class="sd">            Valid values are ``&#39;C&#39;`` or ``&#39;F&#39;``. Default unit is ``&#39;C&#39;``.</span>
<span class="sd">        :type unit: str</span>

<span class="sd">        :returns: The internal sensor temperature reading.</span>
<span class="sd">        :rtype: float</span>


<span class="sd">        Get temperature reading in `Celsius`:</span>

<span class="sd">            &gt;&gt;&gt; lju3.get_labjacktemp()</span>

<span class="sd">        Get temperature reading in `Fahrenheit`:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; lju3.get_labjacktemp(unit=&#39;F&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tempabs</span> <span class="o">=</span> <span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioGET_AIN</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">tempabs</span> <span class="o">-</span> <span class="mf">273.15</span>
        <span class="k">elif</span> <span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;F&#39;</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="mi">9</span><span class="o">/</span><span class="mi">5</span><span class="o">*</span><span class="p">(</span><span class="n">tempabs</span><span class="o">-</span><span class="mf">273.15</span><span class="p">)</span> <span class="o">+</span> <span class="mi">32</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Temperature units must be either &#39;degC&#39; or &#39;degF&#39;.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">temp</span></div>

    <span class="c1"># HELPER METHODS (PRIVATE)</span>
    <span class="k">def</span> <span class="nf">_eGetArray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Handle</span><span class="p">,</span> <span class="n">IOType</span><span class="p">,</span> <span class="n">Port</span><span class="p">,</span> <span class="n">pValue</span><span class="p">,</span> <span class="n">x1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Perform one call to the LabJack Device returning a data array.</span>
<span class="sd">        </span>
<span class="sd">        This method was created to complement the eGet() function in</span>
<span class="sd">        LabJackPyhon. It&#39;s used primarily in data streaming and like all</span>
<span class="sd">        the other C library functions, it is limited to a Windows platform.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pv</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">pValue</span><span class="p">)</span>
        <span class="n">xv</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_double</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">x1</span><span class="p">))()</span>
        <span class="n">ec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_staticlib</span><span class="o">.</span><span class="n">eGet_DblArray</span><span class="p">(</span>
            <span class="n">Handle</span><span class="p">,</span> <span class="n">IOType</span><span class="p">,</span> <span class="n">Port</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">pv</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">xv</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">ec</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">LabJackException</span><span class="p">(</span><span class="n">ec</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pv</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">xv</span>

    <span class="k">def</span> <span class="nf">_assign_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
        <span class="c1"># Assigning info collected from LabJack handle to private attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;DeviceName&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_serialnum</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;SerialNumber&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="s1">&#39;USB&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hardware</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;HardwareVersion&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_firmware</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;FirmwareVersion&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_assign_ports</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates lists with valid LabJack U3 port names</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Assigning analog output port names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_portDAC</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;DAC0&#39;</span><span class="p">,</span> <span class="s1">&#39;DAC1&#39;</span><span class="p">]</span>
        <span class="c1"># Assigning analog / FIO inout port names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_portAIN</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;AIN0&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN1&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN2&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN3&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO5&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO7&#39;</span><span class="p">,</span>
            <span class="s1">&#39;EIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO5&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO7&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_portAINalt</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;FIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN4&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN5&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN6&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN7&#39;</span><span class="p">,</span>
            <span class="s1">&#39;AIN8&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN9&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN10&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN11&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN12&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN13&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN14&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN15&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_portAINsp</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;SINGLE-ENDED&#39;</span><span class="p">,</span> <span class="s1">&#39;SPECIAL&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_check_port</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">namelist</span><span class="p">,</span> <span class="n">porttype</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the port NAMES belong to the possible values in</span>
<span class="sd">        the correposnding PORTTYPE list of valid names. If all NAMES</span>
<span class="sd">        are valid then FLAGPORT = 1, otherwise FLAGPORT = 0</span>

<span class="sd">        A user defined list can be passed with porttype = &#39;USER&#39;</span>
<span class="sd">        through an additional argument VARARGIN</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Making sure inputs are lists</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">namelist</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">namelist</span> <span class="o">=</span> <span class="p">[</span><span class="n">namelist</span><span class="p">]</span>
        <span class="c1"># Assining valid names list based on port type</span>
        <span class="k">if</span> <span class="n">porttype</span> <span class="o">==</span> <span class="s2">&quot;DAC&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDAC</span>
        <span class="k">elif</span> <span class="n">porttype</span> <span class="o">==</span> <span class="s2">&quot;AIN&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portAIN</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portAINalt</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portAINsp</span>
        <span class="k">elif</span> <span class="n">porttype</span> <span class="o">==</span> <span class="s2">&quot;QUAD&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s1">&#39;FIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO5&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO7&#39;</span><span class="p">,</span>
                <span class="s1">&#39;AIN4&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN5&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN6&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN7&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">porttype</span> <span class="o">==</span> <span class="s2">&quot;USER&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># Returns true if all names in namelist are validnames</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">([</span><span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">validnames</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">namelist</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_get_DACnumber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;DAC0&#39;</span><span class="p">:</span>
            <span class="n">DACnumber</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;DAC1&#39;</span><span class="p">:</span>
            <span class="n">DACnumber</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">DACnumber</span>

    <span class="k">def</span> <span class="nf">_get_AINnumber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">AINnumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portAIN</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">AINnumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portAINalt</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">AINnumber</span></div>


<div class="viewcode-block" id="LabJackU6"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6">[docs]</a><span class="k">class</span> <span class="nc">LabJackU6</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The class to represent the LabJack U6</span>


<span class="sd">    :param serialnum: The device serial number.</span>
<span class="sd">    :type serialnum: int</span>

<span class="sd">    Ports that are made available with this class are:</span>

<span class="sd">        * Analog Output (0 to 5V) : ``&#39;DAC0&#39;`` , ``&#39;DAC1&#39;``</span>
<span class="sd">        * Analog Input (+/-10V)   : ``&#39;AIN0&#39;`` , ``&#39;AIN1&#39;``, ... , ``&#39;AIN13&#39;``</span>
<span class="sd">        * Digital I/O             : ``&#39;FIO0&#39;`` , ``&#39;FIO1&#39;``, ... , ``&#39;FIO7&#39;``</span>
<span class="sd">        * Digital I/O             : ``&#39;EIO0&#39;`` , ``&#39;EIO1&#39;``, ... , ``&#39;EIO7&#39;``</span>

<span class="sd">    Device-specific methods:</span>

<span class="sd">        * `get_bitdir` - Gets digital port bit direction</span>
<span class="sd">        * `set_range` - Sets analog input voltage range</span>
<span class="sd">        * `set_pwm_quad` - Sets simultaneous PWM output and encoder input</span>


<span class="sd">    Connect to the first found U6:</span>

<span class="sd">        &gt;&gt;&gt; from labjack_unified.devices import LabJackU6</span>
<span class="sd">        &gt;&gt;&gt; lju6 = LabJackU6()</span>
<span class="sd">        &gt;&gt;&gt; lju6.display_info()</span>
<span class="sd">        &gt;&gt;&gt; lju6.close()</span>

<span class="sd">    You can also connect to a specific device using its serial number:</span>

<span class="sd">        &gt;&gt;&gt; lju6 = LabJackU6(360012345)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># CONSTRUCTOR METHODS</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serialnum</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Class constructor</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_staticlib</span> <span class="o">=</span> <span class="n">_loadLibrary</span><span class="p">()</span>
        <span class="c1"># Attempting to open the device</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">serialnum</span><span class="p">:</span>
                <span class="c1"># Opens LabJack with specific serial number</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span> <span class="o">=</span> <span class="n">u6</span><span class="o">.</span><span class="n">U6</span><span class="p">(</span><span class="n">autoOpen</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">serial</span><span class="o">=</span><span class="n">serialnum</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Opens first available LabJack</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span> <span class="o">=</span> <span class="n">u6</span><span class="o">.</span><span class="n">U6</span><span class="p">(</span><span class="n">autoOpen</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">LabJackException</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_numports</span> <span class="o">=</span> <span class="mi">34</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_assign_info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">configU6</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_assign_ports</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reset_config</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_range</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Opened LabJack&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serialnum</span><span class="p">)</span>

<div class="viewcode-block" id="LabJackU6.close"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the U6 device connection.</span>

<span class="sd">        &gt;&gt;&gt; lju6.close()</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_staticlib</span><span class="o">.</span><span class="n">Close</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Closed LabJack&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serialnum</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU6.display_info"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.display_info">[docs]</a>    <span class="k">def</span> <span class="nf">display_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Display a summary with the U6 device information.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;____________________________________________________________&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Device Name........&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Serial Number......&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serialnum</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hardware Version...&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hardware</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Firmware Version...&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_firmware</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Connection Type....&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;____________________________________________________________&#39;</span><span class="p">)</span></div>

    <span class="c1"># I/O METHODS</span>
<div class="viewcode-block" id="LabJackU6.set_digital"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.set_digital">[docs]</a>    <span class="k">def</span> <span class="nf">set_digital</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write the digital state to an output port.</span>
<span class="sd">        It also sets the port direction to output.</span>


<span class="sd">        :param name: The port name to set the state.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :param state: The digital state `0 = Low`, `1 = High`.</span>
<span class="sd">        :type state: int</span>


<span class="sd">        Set port ``&#39;FIO0&#39;`` output to high and port ``&#39;FIO1&#39;`` to low:</span>

<span class="sd">            &gt;&gt;&gt; lju6.set_digital(&#39;FIO0&#39;, 1)</span>
<span class="sd">            &gt;&gt;&gt; lju6.set_digital(&#39;FIO1&#39;, 0)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Checking for valid inputs</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;DIO&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid digital IO port name.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">state</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">state</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Port state must be either 1 or 0&#39;</span><span class="p">)</span>
        <span class="c1"># Setting port state by port number</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_DIGITAL_BIT</span><span class="p">,</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">_get_DIOnumber</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="n">state</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU6.get_digital"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.get_digital">[docs]</a>    <span class="k">def</span> <span class="nf">get_digital</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read the digital state from an input port.</span>
<span class="sd">        It also sets the port direction to input.</span>


<span class="sd">        :param name: The port name to get the state.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :returns: The state of the digital port. `0 = Low`, `1 = High`.</span>
<span class="sd">        :rtype: int</span>


<span class="sd">        Get port ``&#39;FIO2&#39;`` input state:</span>

<span class="sd">            &gt;&gt;&gt; lju6.get_digital(&#39;FIO2&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Checking for valid inputs</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;DIO&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid digital IO port name.&#39;</span><span class="p">)</span>
        <span class="c1"># Getting port state by port number</span>
        <span class="n">state</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioGET_DIGITAL_BIT</span><span class="p">,</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">_get_DIOnumber</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">state</span></div>

<div class="viewcode-block" id="LabJackU6.get_bitdir"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.get_bitdir">[docs]</a>    <span class="k">def</span> <span class="nf">get_bitdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read the direction of the digital port.</span>


<span class="sd">        :param name: The port name to get the direction.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :returns: The direction of the digital port. `Input` or `Output`.</span>
<span class="sd">        :rtype: str</span>


<span class="sd">        Get the direction of port ``&#39;FIO2&#39;``:</span>

<span class="sd">            &gt;&gt;&gt; lju6.get_bitdir(&#39;FIO2&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Checking for valid input port names</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;DIO&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid digital I/O port name.&#39;</span><span class="p">)</span>
        <span class="c1"># Getting digital port bit direction</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioGET_DIGITAL_BIT_DIR</span><span class="p">,</span>
                     <span class="bp">self</span><span class="o">.</span><span class="n">_get_DIOnumber</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">bitdir</span> <span class="o">=</span> <span class="s1">&#39;input&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bitdir</span> <span class="o">=</span> <span class="s1">&#39;output&#39;</span>
        <span class="k">return</span> <span class="n">bitdir</span></div>

<div class="viewcode-block" id="LabJackU6.set_analog"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.set_analog">[docs]</a>    <span class="k">def</span> <span class="nf">set_analog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set analog output voltage.</span>


<span class="sd">        :param name: The port name to set the output voltage.</span>
<span class="sd">            Available ports are ``&#39;DAC0&#39;`` and ``&#39;DAC1&#39;``.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :param value: The output voltage between ``0`` and ``5`` V.</span>
<span class="sd">        :type value: float</span>


<span class="sd">        Set port ``&#39;DAC1&#39;`` output voltage to ``2.2`` V:</span>

<span class="sd">            &gt;&gt;&gt; lju6.set_analog(&#39;DAC1&#39;, 2.2)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Checking for valid input port names</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;DAC&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid analog output port name.&#39;</span><span class="p">)</span>
        <span class="c1"># Getting corresponding port number</span>
        <span class="n">DACnumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_DACnumber</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="c1"># Limiting analog values</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># Setting analog port output voltage</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_DAC</span><span class="p">,</span> <span class="n">DACnumber</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU6.get_analog"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.get_analog">[docs]</a>    <span class="k">def</span> <span class="nf">get_analog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;single-ended&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get analog input voltage.</span>


<span class="sd">        :param name: The positive port name to get the voltage.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :param mode: Can be one of the two options:</span>

<span class="sd">            * ``&#39;single-ended&#39;`` (default value)</span>
<span class="sd">            * ``&#39;differential&#39;`` sets the ports to get a differential voltage.</span>

<span class="sd">        :type mode: str</span>

<span class="sd">        :returns: The input voltage value.</span>
<span class="sd">        :rtype: float</span>


<span class="sd">        Get ``&#39;single-ended&#39;`` voltage on port ``&#39;AIN3&#39;``:</span>

<span class="sd">            &gt;&gt;&gt; lju6.get_analog(&#39;AIN3&#39;)</span>

<span class="sd">        Get ``&#39;differential&#39;`` voltage betweens ports ``&#39;AIN2&#39;`` and</span>
<span class="sd">        ``&#39;AIN3&#39;``:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; lju6.get_analog(&#39;AIN2&#39;, &#39;differential&#39;)</span>

<span class="sd">        .. note::</span>
<span class="sd">            Differential reading uses two consecutive even-odd ports.</span>
<span class="sd">            Valid ports for differential reading are AIN0/2/4/6/8/10/12.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Checking for valid inputs</span>
        <span class="k">if</span> <span class="n">mode</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;single-ended&#39;</span><span class="p">,</span> <span class="s1">&#39;differential&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Valid reference types are &#39;Single-Ended&#39; or &#39;Differential&#39;.&quot;</span><span class="p">)</span>
        <span class="c1"># Assigning range values</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;AIN&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid analog input port name(s).&#39;</span><span class="p">)</span>
        <span class="c1"># Getting corresponding port numbers</span>
        <span class="n">AINpos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_AINnumber</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="n">mode</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;single-ended&#39;</span><span class="p">:</span>
            <span class="n">AINneg</span> <span class="o">=</span> <span class="mi">199</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">flagport</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_portdiff</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">flagport</span><span class="p">:</span>
                <span class="n">AINneg</span> <span class="o">=</span> <span class="n">AINpos</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Valid analog ports are AIN0/2/4/6/8/10/12.&#39;</span><span class="p">)</span>
        <span class="c1"># Getting analog input voltage</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
                     <span class="n">LJ_ioGET_AIN_DIFF</span><span class="p">,</span> <span class="n">AINpos</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">AINneg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span></div>

    <span class="c1"># STREAMING METHODS</span>
<div class="viewcode-block" id="LabJackU6.set_stream"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.set_stream">[docs]</a>    <span class="k">def</span> <span class="nf">set_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">scanrate</span><span class="o">=</span><span class="mi">50000</span><span class="p">,</span> <span class="n">readrate</span><span class="o">=</span><span class="mf">0.5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set and start data streaming.</span>


<span class="sd">        :param name: The port name (or list of names) to be streamed.</span>
<span class="sd">        :type name: str, list(str)</span>

<span class="sd">        :param scanrate:  The scan rate (Hz) of the data streaming. </span>
<span class="sd">            The default (and maximum) value is ``50000`` Hz. The effective scan</span>
<span class="sd">            frequency of each port is the scan rate divided by the number of</span>
<span class="sd">            scanned ports.</span>
<span class="sd">        :type scanrate: int</span>

<span class="sd">        :param readrate:</span>
<span class="sd">            The rate in seconds at which blocks of data are retrieved from the</span>
<span class="sd">            data buffer. The default value is ``0.5`` seconds.</span>
<span class="sd">        :type readrate: float</span>


<span class="sd">        Set data streaming on port ``&#39;AIN0&#39;`` at ``25000`` Hz, every ``0.5`` s:</span>
<span class="sd">            </span>
<span class="sd">            &gt;&gt;&gt; lju6.set_stream(&#39;AIN0&#39;, scanrate=25000, readrate=0.5)</span>

<span class="sd">        Set data streaming on ports ``&#39;AIN0&#39;`` and ``&#39;AIN1&#39;`` at ``50000`` Hz,</span>
<span class="sd">        every ``1.0`` s:</span>

<span class="sd">            &gt;&gt;&gt; lju6.set_stream([&#39;AIN0&#39;, &#39;AIN1&#39;], scanrate=50000, readrate=1.0)</span>


<span class="sd">        .. note::</span>
<span class="sd">            Only analog input ports ``&#39;AIN0&#39;`` to ``&#39;AIN13&#39;`` can be</span>
<span class="sd">            streamed. While it&#39;s possible to stream digital ports,</span>
<span class="sd">            that hasn&#39;t been implemented in this release.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Assigning streamed data block read-in rate (s)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streamreadrate</span> <span class="o">=</span> <span class="n">readrate</span>
        <span class="c1"># Assigning buffer size as 2 times block length (s)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streambuffersize</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_streamreadrate</span>
        <span class="c1"># Assigning data block scan rate (Hz)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scanrate</span> <span class="o">=</span> <span class="n">scanrate</span>
        <span class="c1"># Checking for valid input port names</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="s2">&quot;AIN&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid input port name.&#39;</span><span class="p">)</span>
        <span class="c1"># Getting port numbers</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">names</span><span class="p">]</span>
        <span class="n">portnum</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
            <span class="n">portnum</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_AINnumber</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
        <span class="c1"># Assigning number of streaming ports</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streamnumchannels</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">portnum</span><span class="p">)</span>
        <span class="c1"># Updating scan frequency per port (Hz)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streamscanfreq</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_scanrate</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_streamnumchannels</span><span class="p">)</span>
        <span class="c1"># Clearing streaming ports</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioCLEAR_STREAM_CHANNELS</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Adding ports to scan list</span>
        <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">portnum</span><span class="p">:</span>
            <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioADD_STREAM_CHANNEL</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Assigning scanning frequency</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
             <span class="n">LJ_chSTREAM_SCAN_FREQUENCY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamscanfreq</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Assigning buffer size</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span> <span class="n">LJ_chSTREAM_BUFFER_SIZE</span><span class="p">,</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">_scanrate</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_streambuffersize</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Configuring reads to retrieve whatever data is available without waiting</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
             <span class="n">LJ_chSTREAM_WAIT_MODE</span><span class="p">,</span> <span class="n">LJ_swNONE</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Starting streaming</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioSTART_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU6.stop_stream"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.stop_stream">[docs]</a>    <span class="k">def</span> <span class="nf">stop_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stop data streaming.</span>

<span class="sd">            &gt;&gt;&gt; lju6.stop_stream()</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioSTOP_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU6.get_stream"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.get_stream">[docs]</a>    <span class="k">def</span> <span class="nf">get_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get streaming data block.</span>


<span class="sd">        :returns: 5-tuple</span>

<span class="sd">            * dt</span>
<span class="sd">            </span>
<span class="sd">                The sampling period (s) between each data point.</span>

<span class="sd">            * data</span>

<span class="sd">                The numpy `m-by-n` array containing the streamed data where</span>
<span class="sd">                `m` is the number of samples per port in the block and `n`</span>
<span class="sd">                is the number of ports defined in `set_stream`</span>

<span class="sd">            * numscans</span>
<span class="sd">            </span>
<span class="sd">                The actual number of scans per port in the data block.</span>

<span class="sd">            * commbacklog</span>
<span class="sd">            </span>
<span class="sd">                The communication backlog in % (increasing values indicate that</span>
<span class="sd">                the computer cannot keep up with the data download from the U6</span>
<span class="sd">                driver)</span>

<span class="sd">            * devbacklog</span>
<span class="sd">            </span>
<span class="sd">                The U6 device backlog in % (increasing values indicate that the</span>
<span class="sd">                device cannot keep up with the data streaming - usually not</span>
<span class="sd">                the case)</span>

<span class="sd">        :rtype: (float, ndarray, int, float, float)</span>


<span class="sd">        Retrieve scan period, data, and scan info:</span>

<span class="sd">            &gt;&gt;&gt; dt, datablock, numscans, commbacklog, U3backlog = lju6.get_stream()</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Defining initial number of samples per channnel</span>
        <span class="c1"># (double the size for safety)</span>
        <span class="n">numscans</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamreadrate</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamscanfreq</span>
        <span class="c1"># Preallocating output array</span>
        <span class="n">datasamples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">numscans</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_streamnumchannels</span><span class="p">)</span>
        <span class="n">numscansactual</span><span class="p">,</span> <span class="n">datalong</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_eGetArray</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioGET_STREAM_DATA</span><span class="p">,</span>
            <span class="n">LJ_chALL_CHANNELS</span><span class="p">,</span> <span class="n">numscans</span><span class="p">,</span> <span class="n">datasamples</span><span class="p">)</span>
        <span class="c1"># Separating ports</span>
        <span class="n">numscansactual</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numscansactual</span><span class="p">)</span>
        <span class="n">nrow</span> <span class="o">=</span> <span class="n">numscansactual</span>
        <span class="n">ncol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamnumchannels</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">datalong</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">nrow</span><span class="o">*</span><span class="n">ncol</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nrow</span><span class="p">,</span> <span class="n">ncol</span><span class="p">)</span>
        <span class="c1"># Calculating sample period (s)</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_streamscanfreq</span>
        <span class="c1"># Calculating communication backlog (%)</span>
        <span class="n">commbacklog</span> <span class="o">=</span> <span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
                           <span class="n">LJ_ioGET_CONFIG</span><span class="p">,</span> <span class="n">LJ_chSTREAM_BACKLOG_COMM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">commbacklog</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">commbacklog</span><span class="o">/</span><span class="n">numscansactual</span>
        <span class="c1"># Calculating LabJack device backlog (%)</span>
        <span class="n">devbacklog</span> <span class="o">=</span> <span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
                          <span class="n">LJ_ioGET_CONFIG</span><span class="p">,</span> <span class="n">LJ_chSTREAM_BACKLOG_UD</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">devbacklog</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">devbacklog</span><span class="o">/</span><span class="n">numscansactual</span>
        <span class="c1"># Returning streamed data block parameters</span>
        <span class="k">return</span> <span class="n">dt</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">numscansactual</span><span class="p">,</span> <span class="n">commbacklog</span><span class="p">,</span> <span class="n">devbacklog</span></div>

    <span class="c1"># PWM METHODS</span>
<div class="viewcode-block" id="LabJackU6.set_pwm"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.set_pwm">[docs]</a>    <span class="k">def</span> <span class="nf">set_pwm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pwmnum</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">dirport1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dirport2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="mi">366</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configure PWM output.</span>


<span class="sd">        :param pwmnum: The number of PWM output signals.</span>
<span class="sd">            ``1`` or ``2`` PWMs can be used. For one PWM, the output port is</span>
<span class="sd">            ``&#39;FIO0&#39;``. For two PWMs, the output ports are ``&#39;FIO0&#39;`` and </span>
<span class="sd">            ``&#39;FIO1&#39;``.</span>
<span class="sd">        :type pwmnum: int</span>

<span class="sd">        :param dirport1: The type of ports that control the PWM `direction`</span>
<span class="sd">            for electric motor control. There are three options:</span>

<span class="sd">            * ``None``  - Default value (no direction ports are used)</span>
<span class="sd">            * ``&#39;DAC&#39;`` - Uses analog ports ``&#39;DAC0&#39;`` and ``&#39;DAC1&#39;``</span>
<span class="sd">            * ``&#39;DIO&#39;`` - Uses digital ports ``&#39;FIO2&#39;`` and ``&#39;FIO3&#39;``</span>

<span class="sd">        :type dirport1: None, str</span>

<span class="sd">        :param dirport2: Same as `dirport1`.</span>
<span class="sd">            It&#39;s used when two PWM outputs are enabled. The ``&#39;DAC&#39;`` option</span>
<span class="sd">            can only be used for one set of direction ports, unless the two</span>
<span class="sd">            motors are running synchronously. For the ``&#39;DIO&#39;`` option,</span>
<span class="sd">            digital ports ``&#39;FIO4&#39;`` and ``&#39;FIO5&#39;`` are used.</span>
<span class="sd">        :type dirport2: None, str</span>

<span class="sd">        :param frequency: The PWM signal frequency in Hz.</span>
<span class="sd">            In the case of two PWMs, both will have the same frequency. Valid</span>
<span class="sd">            values are ``183``, ``366`` or ``732``.</span>
<span class="sd">        :type frequency: int</span>


<span class="sd">        Set 1 PWM for motor control on ``&#39;FIO0&#39;`` with direction ports on</span>
<span class="sd">        ``&#39;DAC0&#39;`` and ``&#39;DAC1&#39;``. The PWM frequency is the default ``366`` Hz:</span>

<span class="sd">            &gt;&gt;&gt; lju6.set_pwm(dirport1=&#39;DAC&#39;)</span>

<span class="sd">        Set 2 PWMs on ports ``&#39;FIO0&#39;`` and ``&#39;FIO1&#39;`` with a frequency of</span>
<span class="sd">        ``183`` Hz:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; lju6.set_pwm(pwmnum=2, frequency=183)</span>

<span class="sd">        Set 2 PWMs for motor control on ports ``&#39;FIO0&#39;`` and ``&#39;FIO1&#39;``, using</span>
<span class="sd">        the digital ports ``&#39;FIO2&#39;`` and ``&#39;FIO3&#39;`` for motor 1 direction, and</span>
<span class="sd">        ``&#39;FIO4&#39;`` and ``&#39;FIO5&#39;`` for motor 2 direction. The PWM frequency is</span>
<span class="sd">        ``732`` Hz:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; lju6.set_pwm(pwmnum=2, dirport1=&#39;DIO&#39;, dirport2=&#39;DIO&#39;, frequency=732)</span>


<span class="sd">        .. note::</span>
<span class="sd">            When using digital ports, a 10 kOhm resistor has to be connected from</span>
<span class="sd">            the LabJack `VS` port to each one of the `DIO` ports to ensure true</span>
<span class="sd">            `high` and `low` states.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Setting flag for simultaneous PWN and quadrature setup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmquad</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># Defining PWM frequency divisors and checking input</span>
        <span class="n">pwmfreq</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;183&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s1">&#39;366&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;732&#39;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">frequency</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">pwmfreq</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Valid PWM frequencies are 183, 366, and 732 Hz.&quot;</span><span class="p">)</span>
        <span class="c1"># Checking number of PWM outputs and direction ports</span>
        <span class="n">dirport</span> <span class="o">=</span> <span class="p">[</span><span class="n">dirport1</span><span class="p">,</span> <span class="n">dirport2</span><span class="p">]</span>
        <span class="n">pwmname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;FIO0&#39;</span><span class="p">]</span>
        <span class="n">pwmdir</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;DAC&#39;</span><span class="p">:</span>
            <span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;DAC0&#39;</span><span class="p">,</span> <span class="s1">&#39;DAC1&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;DIO&#39;</span><span class="p">:</span>
            <span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;FIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO3&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">pwmnum</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">pwmname</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;FIO1&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">pwmdir</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;DAC&#39;</span><span class="p">:</span>
                <span class="n">pwmdir</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;DAC0&#39;</span><span class="p">,</span> <span class="s1">&#39;DAC1&#39;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;DIO&#39;</span><span class="p">:</span>
                <span class="n">pwmdir</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;FIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO5&#39;</span><span class="p">])</span>
        <span class="c1"># Assigning PWM attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmnum</span> <span class="o">=</span> <span class="n">pwmnum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmname</span> <span class="o">=</span> <span class="n">pwmname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmdir</span> <span class="o">=</span> <span class="n">pwmdir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmfreq</span> <span class="o">=</span> <span class="n">frequency</span>
        <span class="c1"># Assinging frequency divisor</span>
        <span class="n">divisor</span> <span class="o">=</span> <span class="n">pwmfreq</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">frequency</span><span class="p">)]</span>
        <span class="c1"># Assigning PWM pin offset</span>
        <span class="c1"># (always 0 since the timers always start on FIO0)</span>
        <span class="n">pinoffset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># Resetting pin configuration</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPIN_CONFIGURATION_RESET</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Setting the pin offset for the timers</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chTIMER_COUNTER_PIN_OFFSET</span><span class="p">,</span> <span class="n">pinoffset</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Configuring the timer clock to 48 MHz</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chTIMER_CLOCK_BASE</span><span class="p">,</span> <span class="n">LJ_tc48MHZ_DIV</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Setting clock Divisor</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chTIMER_CLOCK_DIVISOR</span><span class="p">,</span> <span class="n">divisor</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Enabling 1 or 2 timers</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chNUMBER_TIMERS_ENABLED</span><span class="p">,</span> <span class="n">pwmnum</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pwmnum</span><span class="p">):</span>
            <span class="c1"># Setting timer to 16 bits</span>
            <span class="c1"># Frequency = (48MHz/Divisor ) / 2^16 Hz</span>
            <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_MODE</span><span class="p">,</span>
                       <span class="n">num</span><span class="p">,</span> <span class="n">LJ_tmPWM16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1"># Setting timer duty cycle to 0%</span>
            <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                       <span class="n">num</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Sending command sequence</span>
        <span class="n">GoOne</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU6.set_dutycycle"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.set_dutycycle">[docs]</a>    <span class="k">def</span> <span class="nf">set_dutycycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">brake1</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">brake2</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set PWM duty cycle value.</span>


<span class="sd">        :param value1: The PWM 1 duty cycle percent value between ``-100``</span>
<span class="sd">            and ``100``.</span>
<span class="sd">        :type value1: float</span>

<span class="sd">        :param value2: The PWM 2 duty cycle percent value between ``-100``</span>
<span class="sd">            and ``100``.</span>
<span class="sd">        :type value2: float</span>

<span class="sd">        :param brake1: The motor 1 brake option used when dutycycle is zero.</span>
<span class="sd">            Brake is applied when ``True``. Motor is floating when ``False``.</span>
<span class="sd">        :type brake1: bool</span>

<span class="sd">        :param brake2: The motor 2 brake option used when dutycycle is zero.</span>
<span class="sd">            Brake is applied when ``True``. Motor is floating when ``False``.</span>
<span class="sd">        :type brake2: bool</span>


<span class="sd">        Set duty cycle to ``50`` % on PWM 1:</span>

<span class="sd">            &gt;&gt;&gt; lju6.set_dutycycle(value1=50)</span>

<span class="sd">        Set duty cycle to ``25`` % (reverse rotation) on PWM 2:</span>

<span class="sd">            &gt;&gt;&gt; lju6.set_dutycycle(value2=-25)</span>

<span class="sd">        Set duty cycle to ``20`` % and ``40`` % on PWMs 1 and 2:</span>
<span class="sd">  </span>
<span class="sd">            &gt;&gt;&gt; lju6.set_dutycycle(value1=20, value2=40)</span>

<span class="sd">        Stop motor 2 and apply brake:</span>

<span class="sd">            &gt;&gt;&gt; lju6.set_dutycycle(value2=0, brake2=True)</span>


<span class="sd">        .. note::</span>
<span class="sd">            1. Avoid suddenly switching the direction of rotation to avoid damaging the motor.</span>
<span class="sd">            2. You can use the brake option True to hold the motor in position.</span>

<span class="sd">        .. note::</span>
<span class="sd">            If the method `set_pwm_quad` was used to configure both a PWM and</span>
<span class="sd">            a quadrature encoder, use only `value1` and `brake1` to control</span>
<span class="sd">            the motor output.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">value1</span><span class="p">,</span> <span class="n">value2</span><span class="p">]</span>
        <span class="n">brakes</span> <span class="o">=</span> <span class="p">[</span><span class="n">brake1</span><span class="p">,</span> <span class="n">brake2</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">pwmnum</span><span class="p">,</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">brake</span><span class="p">,</span> <span class="n">pwmdir</span><span class="p">,</span> <span class="n">pwmtype</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span>
            <span class="n">values</span><span class="p">,</span> <span class="n">brakes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pwmdir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span><span class="p">)):</span>

            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Applying bounds to inputs</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="mi">100</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">100</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100</span>
                <span class="c1"># Applying PWM direction</span>
                <span class="k">if</span> <span class="n">pwmdir</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="c1"># Forward rotation</span>
                        <span class="k">if</span> <span class="n">pwmtype</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">4.5</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">get_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="k">elif</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="c1"># Reverse rotation</span>
                        <span class="k">if</span> <span class="n">pwmtype</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">4.5</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">get_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="c1"># Brake stop</span>
                        <span class="k">if</span> <span class="n">brake</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">pwmtype</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">pwmtype</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">4.5</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">4.5</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">get_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">get_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="c1"># Calculating duty cycle</span>
                <span class="n">dutycycle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="mi">65535</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span>

                <span class="c1"># Setting timer duty cycle to desired value</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pwmquad</span><span class="p">:</span>
                    <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                               <span class="mi">2</span><span class="p">,</span> <span class="n">dutycycle</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                               <span class="n">pwmnum</span><span class="p">,</span> <span class="n">dutycycle</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Sending command sequence</span>
        <span class="n">GoOne</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span></div>

    <span class="c1"># QUADRATURE ENCODER METHODS</span>
<div class="viewcode-block" id="LabJackU6.set_quadrature"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.set_quadrature">[docs]</a>    <span class="k">def</span> <span class="nf">set_quadrature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quadnum</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">zphase1</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">zphase2</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configure quadrature encoder input.</span>


<span class="sd">        :param quadnum: The number of quadrature input signals.</span>
<span class="sd">            ``1`` or ``2`` encoders can be used. For one encoder, the input</span>
<span class="sd">            ports are ``&#39;FIO0&#39;`` and ``&#39;FIO1&#39;``. For two encoders, the input</span>
<span class="sd">            ports for the second one are ``&#39;FIO2&#39;`` and ``&#39;FIO3&#39;``. </span>
<span class="sd">        :type quadnum: int</span>

<span class="sd">        :param zphase1: The logic value indicating if a `Z` phase reference</span>
<span class="sd">            pulse is used for the first encoder. Port ``&#39;FIO2&#39;`` is used if</span>
<span class="sd">            `quadnum` = ``1``. Port ``&#39;FIO4&#39;`` is used if `quadnum` = ``2``. </span>
<span class="sd">        :type zphase1: bool</span>

<span class="sd">        :param zphase2: The logic value indicating if a `Z` phase reference</span>
<span class="sd">            pulse is used for the second encoder. Port ``&#39;FIO4&#39;`` is used for</span>
<span class="sd">            the first encoder and port ``&#39;FIO5&#39;`` is used for the second </span>
<span class="sd">            encoder. `zphase2` is ignored if `quadnum` = ``1``.</span>
<span class="sd">        :type zphase1: bool</span>


<span class="sd">        Set ports ``&#39;FIO0&#39;`` and ``&#39;FIO1&#39;`` for encoder with phase `A` and `B`</span>
<span class="sd">        signals only:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; lju6.set_quadrature()</span>

<span class="sd">        Set ports ``&#39;FIO0&#39;`` and ``&#39;FIO1&#39;`` for encoder phase `A` and `B`</span>
<span class="sd">        signals, and port ``&#39;FIO2&#39;`` for the reference `Z` phase:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; lju6.set_quadrature(zphase1=True)</span>

<span class="sd">        Set 2 encoders with `Z` phase. `A` and `B` phases are on ports</span>
<span class="sd">        ``&#39;FIO0&#39;`` and ``&#39;FIO1&#39;`` for encoder 1, and ``&#39;FIO2&#39;`` and ``&#39;FIO3&#39;``</span>
<span class="sd">        for encoder 2. The `Z` phase ports are respectively ``&#39;FIO4&#39;`` and</span>
<span class="sd">        ``&#39;FIO5&#39;``:</span>

<span class="sd">            &gt;&gt;&gt; lju6.set_quadrature(quadnum=2, zphase1=True, zphase2=True)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Setting flag for simultaneous PWN and quadrature setup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmquad</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># Checking input arguments</span>
        <span class="k">if</span> <span class="n">quadnum</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">quadnameAB</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;FIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO1&#39;</span><span class="p">]</span>
            <span class="n">portnumZ</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">zphase1</span><span class="p">:</span>
                <span class="n">portnumZ</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">32768</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_DIOnumber</span><span class="p">(</span><span class="s1">&#39;FIO2&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">quadnum</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">quadnameAB</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;FIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO3&#39;</span><span class="p">]</span>
            <span class="n">portnumZ</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">zphase1</span><span class="p">:</span>
                <span class="n">portnumZ</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">32768</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_DIOnumber</span><span class="p">(</span><span class="s1">&#39;FIO4&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">zphase2</span><span class="p">:</span>
                <span class="n">portnumZ</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">32768</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_DIOnumber</span><span class="p">(</span><span class="s1">&#39;FIO5&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Only 1 or 2 quadrature inputs can be assigned.&#39;</span><span class="p">)</span>
        <span class="c1"># Assigning quadrature attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zphase</span> <span class="o">=</span> <span class="p">[</span><span class="n">zphase1</span><span class="p">,</span> <span class="n">zphase2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_quadnum</span> <span class="o">=</span> <span class="n">quadnum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_quadnameAB</span> <span class="o">=</span> <span class="n">quadnameAB</span>
        <span class="c1"># Assigning quadrature port pin offset</span>
        <span class="n">pinoffset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># Resetting pin configuration</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPIN_CONFIGURATION_RESET</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Setting the pin offset for the timers</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chTIMER_COUNTER_PIN_OFFSET</span><span class="p">,</span> <span class="n">pinoffset</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Configuring the timer clock to 48 MHz</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chTIMER_CLOCK_BASE</span><span class="p">,</span> <span class="n">LJ_tc48MHZ</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Enabling 2 or 4 timers</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chNUMBER_TIMERS_ENABLED</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">quadnum</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">quadnum</span><span class="p">):</span>
            <span class="c1"># Setting quadrature mode</span>
            <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_MODE</span><span class="p">,</span>
                    <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">num</span><span class="p">)</span><span class="o">+</span><span class="mi">0</span><span class="p">,</span> <span class="n">LJ_tmQUAD</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_MODE</span><span class="p">,</span>
                    <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">num</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">LJ_tmQUAD</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1"># Setting timer values to add Z port (or reset in case there&#39;s no Z)</span>
            <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                    <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">num</span><span class="p">)</span><span class="o">+</span><span class="mi">0</span><span class="p">,</span> <span class="n">portnumZ</span><span class="p">[</span><span class="n">num</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                    <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">num</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">portnumZ</span><span class="p">[</span><span class="n">num</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Sending command sequence</span>
        <span class="n">GoOne</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU6.get_counter"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.get_counter">[docs]</a>    <span class="k">def</span> <span class="nf">get_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get current quadrature counter value.</span>


<span class="sd">        :returns: The counter value or a list with 2 values for 2 encoders.</span>
<span class="sd">        :rtype: int, list(int)</span>

<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; lju6.get_counter()</span>


<span class="sd">        .. note::</span>
<span class="sd">            Because the qudrature counter counts rising and falling edges</span>
<span class="sd">            of phases `A` and `B`, a 1024 pulse/rev encoder will generate 4096</span>
<span class="sd">            counts for a full shaft turn.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioGET_TIMER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadnum</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioGET_TIMER</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">value</span></div>

<div class="viewcode-block" id="LabJackU6.reset_counter"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.reset_counter">[docs]</a>    <span class="k">def</span> <span class="nf">reset_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter1</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">counter2</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset quadrature counter value.</span>


<span class="sd">        :param counter1: The flag indicating whether to reset counter 1 or not.</span>
<span class="sd">            The default value is ``True`` and it resets the counter.</span>
<span class="sd">        :type counter1: bool</span>

<span class="sd">        :param counter2: The flag indicating whether to reset counter 2 or not.</span>
<span class="sd">            The default value is ``True`` and it resets the counter.</span>
<span class="sd">        :type counter2: bool</span>


<span class="sd">        Resets current counter value of all encoders.</span>

<span class="sd">            &gt;&gt;&gt; lju6.reset_counter()</span>

<span class="sd">        Resets current counter value only for second encoder.</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; lju6.reset_counter(counter1=False)</span>


<span class="sd">        .. note::</span>
<span class="sd">            The count is only reset when a `Z` phase isn&#39;t being used.</span>

<span class="sd">        .. note::</span>
<span class="sd">            If the method `set_pwm_quad` was used to configure both a PWM and</span>
<span class="sd">            a quadrature encoder, use `counter2` = ``&#39;False&#39;`` to reset the counter.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zphase</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">counter1</span><span class="p">:</span>
            <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                       <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                       <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1"># Sending command sequence</span>
            <span class="n">GoOne</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadnum</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zphase</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">counter2</span><span class="p">:</span>
                <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                        <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                        <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="c1"># Sending command sequence</span>
                <span class="n">GoOne</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span></div>

    <span class="c1"># OTHER METHODS</span>
<div class="viewcode-block" id="LabJackU6.set_pwm_quad"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.set_pwm_quad">[docs]</a>    <span class="k">def</span> <span class="nf">set_pwm_quad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dirport</span><span class="o">=</span><span class="s1">&#39;DAC&#39;</span><span class="p">,</span> <span class="n">zphase</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configure 1 PWM output and 1 quadrature input.</span>
<span class="sd">        The PWM port is ``&#39;FIO2&#39;`` and the phases `A` and `B` ports are</span>
<span class="sd">        respectively ``&#39;FIO0&#39;`` and ``&#39;FIO1&#39;``.</span>


<span class="sd">        :param dirport: The type of ports that control the PWM `direction`</span>
<span class="sd">            for electric motor control. There are three options:</span>

<span class="sd">            * ``None``  - Default value (no direction ports are used)</span>
<span class="sd">            * ``&#39;DAC&#39;`` - Uses analog ports ``&#39;DAC0&#39;`` and ``&#39;DAC1&#39;``</span>
<span class="sd">            * ``&#39;DIO&#39;`` - Uses digital ports ``&#39;FIO4&#39;`` and ``&#39;FIO5&#39;``</span>

<span class="sd">        :type dirport1: None, str</span>

<span class="sd">        :param zphase: The logic value indicating if a `Z` phase reference</span>
<span class="sd">            pulse is used on port ``&#39;FIO3&#39;``. </span>
<span class="sd">        :type zphase: bool</span>


<span class="sd">        Set a PWM for motor control on ``&#39;FIO2&#39;`` with direction ports on</span>
<span class="sd">        ``&#39;DAC0&#39;`` and ``&#39;DAC1&#39;``. The encoder `A` and `B` ports are ``&#39;FIO0&#39;``</span>
<span class="sd">        and ``&#39;FIO1&#39;``:</span>

<span class="sd">            &gt;&gt;&gt; lju6.set_pwm_quad(dirport=&#39;DAC&#39;)</span>

<span class="sd">        Set a PWM for motor control on ``&#39;FIO2&#39;`` with direction ports on</span>
<span class="sd">        ``&#39;FIO4&#39;`` and ``&#39;FIO5&#39;``. The A-B-Z encoder `A` and `B` ports are</span>
<span class="sd">        ``&#39;FIO0&#39;`` and ``&#39;FIO1&#39;``. The `Z` phase is on port ``&#39;FIO3&#39;``:</span>

<span class="sd">            &gt;&gt;&gt; lju6.set_pwm_quad(dirport=&#39;DIO&#39;, zphase=True)</span>


<span class="sd">        .. note::</span>
<span class="sd">            Due to limitations with internal clocks under this configuration,</span>
<span class="sd">            the PWM frequency is fixed at 732 Hz.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Setting flag for simultaneous PWN and quadrature setup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmquad</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># Assigning A-B port names</span>
        <span class="n">quadnameAB</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;FIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO1&#39;</span><span class="p">]</span>
        <span class="c1"># Assigning Z port number</span>
        <span class="n">portnumZ</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">zphase</span><span class="p">:</span>
            <span class="n">portnumZ</span> <span class="o">=</span> <span class="mi">32768</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_DIOnumber</span><span class="p">(</span><span class="s1">&#39;FIO3&#39;</span><span class="p">)</span>
        <span class="c1"># Assigning PWM ports</span>
        <span class="n">pwmname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;FIO2&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">dirport</span> <span class="o">==</span> <span class="s1">&#39;DAC&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">pwmdir</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;DAC0&#39;</span><span class="p">,</span> <span class="s1">&#39;DAC1&#39;</span><span class="p">]]</span>
        <span class="k">elif</span> <span class="n">dirport</span> <span class="o">==</span> <span class="s1">&#39;DIO&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">pwmdir</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;FIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO5&#39;</span><span class="p">]]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Valid direction port types are &#39;DAC&#39; or &#39;DIO&#39;.&quot;</span><span class="p">)</span>
        <span class="c1"># Setting some attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_quadnum</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zphase</span> <span class="o">=</span> <span class="p">[</span><span class="n">zphase</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_quadnameAB</span> <span class="o">=</span> <span class="n">quadnameAB</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmnum</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmname</span> <span class="o">=</span> <span class="n">pwmname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmdir</span> <span class="o">=</span> <span class="n">pwmdir</span>
        <span class="c1">#</span>
        <span class="c1"># Setting timers for quadrature and PWM</span>
        <span class="c1">#</span>
        <span class="c1"># Assigning timer pin offset</span>
        <span class="n">pinoffset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># Resetting pin configuration</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPIN_CONFIGURATION_RESET</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Setting the pin offset for the timers</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chTIMER_COUNTER_PIN_OFFSET</span><span class="p">,</span> <span class="n">pinoffset</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Configuring the timer clock to 48 MHz</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chTIMER_CLOCK_BASE</span><span class="p">,</span> <span class="n">LJ_tc48MHZ</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Enabling 3 timers</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_CONFIG</span><span class="p">,</span>
                   <span class="n">LJ_chNUMBER_TIMERS_ENABLED</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1">#</span>
        <span class="c1"># Setting up quadrature input configuration</span>
        <span class="c1">#</span>
        <span class="c1"># Setting quadrature timers</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_MODE</span><span class="p">,</span>
                   <span class="mi">0</span><span class="p">,</span> <span class="n">LJ_tmQUAD</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_MODE</span><span class="p">,</span>
                   <span class="mi">1</span><span class="p">,</span> <span class="n">LJ_tmQUAD</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Setting timer values to add Z port (or reset in case there&#39;s no Z)</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                   <span class="mi">0</span><span class="p">,</span> <span class="n">portnumZ</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                   <span class="mi">1</span><span class="p">,</span> <span class="n">portnumZ</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1">#</span>
        <span class="c1"># Setting up PWM output configuration</span>
        <span class="c1">#</span>
        <span class="c1"># Setting third timer to 16-bit PWM</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_MODE</span><span class="p">,</span>
                   <span class="mi">2</span><span class="p">,</span> <span class="n">LJ_tmPWM16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Setting timer duty cycle to 0%</span>
        <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_TIMER_VALUE</span><span class="p">,</span>
                   <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Sending command sequence</span>
        <span class="n">GoOne</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU6.set_range"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.set_range">[docs]</a>    <span class="k">def</span> <span class="nf">set_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">ranges</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set analog input voltage range.</span>


<span class="sd">        :param names: The analog port(s) that will have their ranges modified.</span>
<span class="sd">            Use ``&#39;ALL&#39;`` to set all analog input ports to the same range.</span>
<span class="sd">        :type names: str, list(str)</span>

<span class="sd">        :param ranges: The voltage range value to be used.</span>
<span class="sd">            Valid ranges are +/- ``10``, ``1``, ``0.1``, ``0.01`` V. If a</span>
<span class="sd">            single value is used, it will be applied to all ports in</span>
<span class="sd">            `names`.</span>
<span class="sd">        :type ranges: float, list(float)</span>


<span class="sd">        Set port ``&#39;AIN0&#39;`` with a range of +/- ``1`` V:</span>
<span class="sd">       </span>
<span class="sd">            &gt;&gt;&gt; lju6.set_range(&#39;AIN0&#39;, 1)</span>

<span class="sd">        Set port ``&#39;AIN0&#39;`` and ``&#39;AIN2&#39;`` with a range of +/- ``0.1`` and</span>
<span class="sd">        ``0.01`` V:</span>

<span class="sd">            &gt;&gt;&gt; lju6.set_range([&#39;AIN0&#39;, &#39;AIN2&#39;], [0.1, 0.01])</span>

<span class="sd">        Set all ports with a (default) range of +/- ``10`` V:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; lju6.set_range(&#39;ALL&#39;, 10)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#</span>
        <span class="n">rcode</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;10&#39;</span><span class="p">:</span> <span class="n">LJ_rgBIP10V</span><span class="p">,</span>
            <span class="s1">&#39;1&#39;</span><span class="p">:</span> <span class="n">LJ_rgBIP1V</span><span class="p">,</span>
            <span class="s1">&#39;0.1&#39;</span><span class="p">:</span> <span class="n">LJ_rgBIPP1V</span><span class="p">,</span>
            <span class="s1">&#39;0.01&#39;</span><span class="p">:</span> <span class="n">LJ_rgBIPP01V</span>
        <span class="p">}</span>
        <span class="c1"># Checking for valid inputs</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span> <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">names</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">ranges</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span> <span class="n">ranges</span> <span class="o">=</span> <span class="p">[</span><span class="n">ranges</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ranges</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ranges</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Number of ports must match number of ranges.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ranges</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">ranges</span> <span class="o">=</span> <span class="n">ranges</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">ranges</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Valid ranges are 10, 1, 0.1, or 0.01 V.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portAIN</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="s2">&quot;AIN&quot;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid analog input port name(s).&#39;</span><span class="p">)</span>
        <span class="c1"># Assigning range values</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">ranges</span><span class="p">):</span>
            <span class="n">AddRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPUT_AIN_RANGE</span><span class="p">,</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">_get_AINnumber</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="n">rcode</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">)],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Sending command sequence</span>
        <span class="n">GoOne</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackU6.get_labjacktemp"><a class="viewcode-back" href="../LabJackU6.html#devices.LabJackU6.get_labjacktemp">[docs]</a>    <span class="k">def</span> <span class="nf">get_labjacktemp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get ambient temperature from LabJack&#39;s internal sensor.</span>


<span class="sd">        :param unit: The temperature measurement unit.</span>
<span class="sd">            Valid values are ``&#39;C&#39;`` or ``&#39;F&#39;``. Default unit is ``&#39;C&#39;``.</span>
<span class="sd">        :type unit: str</span>

<span class="sd">        :returns: The internal sensor temperature reading.</span>
<span class="sd">        :rtype: float</span>


<span class="sd">        Get temperature reading in `Celsius`:</span>

<span class="sd">            &gt;&gt;&gt; lju6.get_labjacktemp()</span>

<span class="sd">        Get temperature reading in `Fahrenheit`:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; lju6.get_labjacktemp(unit=&#39;F&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tempabs</span> <span class="o">=</span> <span class="n">eGet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioGET_AIN</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">tempabs</span> <span class="o">-</span> <span class="mf">273.15</span>
        <span class="k">elif</span> <span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;F&#39;</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="mi">9</span><span class="o">/</span><span class="mi">5</span><span class="o">*</span><span class="p">(</span><span class="n">tempabs</span><span class="o">-</span><span class="mf">273.15</span><span class="p">)</span> <span class="o">+</span> <span class="mi">32</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Temperature units must be either &#39;degC&#39; or &#39;degF&#39;.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">temp</span></div>

    <span class="c1"># HELPER METHODS (PRIVATE)</span>
    <span class="k">def</span> <span class="nf">_eGetArray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Handle</span><span class="p">,</span> <span class="n">IOType</span><span class="p">,</span> <span class="n">Port</span><span class="p">,</span> <span class="n">pValue</span><span class="p">,</span> <span class="n">x1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Perform one call to the LabJack Device returning a data array.</span>
<span class="sd">        </span>
<span class="sd">        This method was created to complement the eGet() function in</span>
<span class="sd">        LabJackPyhon. It&#39;s used primarily in data streaming and like all</span>
<span class="sd">        the other C library functions, it is limited to a Windows platform.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pv</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">pValue</span><span class="p">)</span>
        <span class="n">xv</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_double</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">x1</span><span class="p">))()</span>
        <span class="n">ec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_staticlib</span><span class="o">.</span><span class="n">eGet_DblArray</span><span class="p">(</span>
            <span class="n">Handle</span><span class="p">,</span> <span class="n">IOType</span><span class="p">,</span> <span class="n">Port</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">pv</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">xv</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">ec</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">LabJackException</span><span class="p">(</span><span class="n">ec</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pv</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">xv</span>

    <span class="k">def</span> <span class="nf">_assign_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
        <span class="c1"># Assigning info collected from LabJack handle to private attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;DeviceName&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_serialnum</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;SerialNumber&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="s1">&#39;USB&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hardware</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;HardwareVersion&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_firmware</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;FirmwareVersion&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_assign_ports</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates lists with valid LabJAck T7 port names</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Assigning analog output port names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_portDAC</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;DAC0&#39;</span><span class="p">,</span> <span class="s1">&#39;DAC1&#39;</span><span class="p">]</span>
        <span class="c1"># Assigning analog inout port names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_portAIN</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;AIN0&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN1&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN2&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN3&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN4&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN5&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN6&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN7&#39;</span><span class="p">,</span>
            <span class="s1">&#39;AIN8&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN9&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN10&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN11&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN12&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN13&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN14&#39;</span><span class="p">]</span>
        <span class="c1"># Assigning digital I/O port names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_portDIO</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;DIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO5&#39;</span><span class="p">,</span>
            <span class="s1">&#39;DIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO7&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO8&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO9&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO10&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO11&#39;</span><span class="p">,</span>
            <span class="s1">&#39;DIO12&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO13&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO14&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO15&#39;</span><span class="p">,</span> <span class="s1">&#39;DI16&#39;</span><span class="p">,</span> <span class="s1">&#39;DI17&#39;</span><span class="p">,</span>
            <span class="s1">&#39;DIO18&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO19&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO20&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO21&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO22&#39;</span><span class="p">]</span>
        <span class="c1"># Assigning alternate digital I/O port names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_portDIOalt</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;FIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO5&#39;</span><span class="p">,</span>
            <span class="s1">&#39;FIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO7&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO3&#39;</span><span class="p">,</span>
            <span class="s1">&#39;EIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO5&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO7&#39;</span><span class="p">,</span> <span class="s1">&#39;CIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;CIO1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;CIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;CIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;MIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;MIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;MIO2&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_reset_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the flexible IO ports to default all digital.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None.</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        Reset flexible port configuration</span>
<span class="sd">        &gt;&gt;&gt; lju3.reset_config()</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        On the LabJack U3-HV the first 4 ports AIN0 to AIN3 are always analog.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ePut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">LJ_ioPIN_CONFIGURATION_RESET</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_check_port</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">namelist</span><span class="p">,</span> <span class="n">portype</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the port NAMES belong to the possible values in</span>
<span class="sd">        the correposnding PORTTYPE list of valid names. If all NAMES</span>
<span class="sd">        are valid then FLAGPORT = 1, otherwise FLAGPORT = 0</span>

<span class="sd">        A user defined list can be passed with PORTYPE = &#39;USER&#39;</span>
<span class="sd">        through an additional argument VARARGIN</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Making sure inputs are lists</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">namelist</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">namelist</span> <span class="o">=</span> <span class="p">[</span><span class="n">namelist</span><span class="p">]</span>
        <span class="c1"># Assining valid names list based on port type</span>
        <span class="k">if</span> <span class="n">portype</span> <span class="o">==</span> <span class="s2">&quot;DAC&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDAC</span>
        <span class="k">elif</span> <span class="n">portype</span> <span class="o">==</span> <span class="s2">&quot;AIN&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portAIN</span>
        <span class="k">elif</span> <span class="n">portype</span> <span class="o">==</span> <span class="s2">&quot;DIO&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDIO</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDIOalt</span>
        <span class="k">elif</span> <span class="n">portype</span> <span class="o">==</span> <span class="s2">&quot;ALLIN&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portAIN</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDIO</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDIOalt</span>
        <span class="k">elif</span> <span class="n">portype</span> <span class="o">==</span> <span class="s2">&quot;QUAD&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s1">&#39;DIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO5&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO7&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO8&#39;</span><span class="p">,</span>
                <span class="s1">&#39;FIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO5&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO7&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO0&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">portype</span> <span class="o">==</span> <span class="s2">&quot;USER&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># Returns true if all names in namelist are validnames</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">([</span><span class="n">name</span> <span class="ow">in</span> <span class="n">validnames</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">namelist</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_check_portdiff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
        <span class="c1"># Making sure inputs are lists</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">names</span><span class="p">]</span>
        <span class="c1"># Getting port name digits</span>
        <span class="n">portnum</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d+&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">]</span>
        <span class="c1"># Checking for all even digits</span>
        <span class="n">flagport</span> <span class="o">=</span> <span class="nb">all</span><span class="p">([(</span><span class="n">num</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">portnum</span><span class="p">])</span>
        <span class="c1"># Checking for AIN14</span>
        <span class="k">if</span> <span class="mi">14</span> <span class="ow">in</span> <span class="n">portnum</span><span class="p">:</span>
            <span class="n">flagport</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># Returning flag and port numbers</span>
        <span class="k">return</span> <span class="n">flagport</span><span class="p">,</span> <span class="n">portnum</span>

    <span class="k">def</span> <span class="nf">_get_DACnumber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;DAC0&#39;</span><span class="p">:</span>
            <span class="n">DACnumber</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;DAC1&#39;</span><span class="p">:</span>
            <span class="n">DACnumber</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">DACnumber</span>

    <span class="k">def</span> <span class="nf">_get_AINnumber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">AINnumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portAIN</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">AINnumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portAINalt</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">AINnumber</span>

    <span class="k">def</span> <span class="nf">_get_DIOnumber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">DIOnumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDIO</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">DIOnumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDIOalt</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">DIOnumber</span></div>


<div class="viewcode-block" id="LabJackT7"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7">[docs]</a><span class="k">class</span> <span class="nc">LabJackT7</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The class to represent the LabJack T7</span>


<span class="sd">    :param serialnum: The device serial number.</span>
<span class="sd">    :type serialnum: int</span>

<span class="sd">    Ports that are made available with this class are:</span>

<span class="sd">        * Analog Output (0 to 5V) : ``&#39;DAC0&#39;`` , ``&#39;DAC1&#39;``</span>
<span class="sd">        * Analog Input (+/-10V)   : ``&#39;AIN0&#39;`` , ``&#39;AIN1&#39;``, ... , ``&#39;AIN13&#39;``</span>
<span class="sd">        * Digital I/O             : ``&#39;FIO0&#39;`` , ``&#39;FIO1&#39;``, ... , ``&#39;FIO7&#39;``</span>
<span class="sd">        * Digital I/O             : ``&#39;EIO0&#39;`` , ``&#39;EIO1&#39;``, ... , ``&#39;EIO7&#39;``</span>

<span class="sd">    Device-specific methods:</span>

<span class="sd">        * `set_range` - Sets analog input voltage range</span>
<span class="sd">        * `set_reference` - Sets analog input reference voltage point</span>
<span class="sd">        * `set_TC` - Sets LabJack configuration for thermocouple input</span>
<span class="sd">        * `get_TCtemp` - Gets thermocouple temperature reading</span>


<span class="sd">    Connect to the first found T7:</span>

<span class="sd">        &gt;&gt;&gt; from labjack_unified.devices import LabJackT7</span>
<span class="sd">        &gt;&gt;&gt; ljt7 = LabJackT7()</span>
<span class="sd">        &gt;&gt;&gt; ljt7.display_info()</span>
<span class="sd">        &gt;&gt;&gt; ljt7.close()</span>

<span class="sd">    You can also connect to a specific device using its serial number.</span>

<span class="sd">        &gt;&gt;&gt; ljt7 = LabJackT7(370012345)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># CONSTRUCTOR METHODS</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serialnum</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Class constructor</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">serialnum</span><span class="p">:</span>
                <span class="c1"># Opens LabJack with specific serial number</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span> <span class="o">=</span> <span class="n">ljm</span><span class="o">.</span><span class="n">openS</span><span class="p">(</span><span class="s2">&quot;ANY&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">,</span> <span class="n">serialnum</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Opens first available LabJack</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span> <span class="o">=</span> <span class="n">ljm</span><span class="o">.</span><span class="n">openS</span><span class="p">(</span><span class="s2">&quot;ANY&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">LJMError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Assigning internal attributes</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_corefreq</span> <span class="o">=</span> <span class="mf">80e6</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_clockdivisor</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_assign_info</span><span class="p">(</span><span class="n">ljm</span><span class="o">.</span><span class="n">getHandleInfo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_assign_ports</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_reference</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;Single-Ended&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_range</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Opened LabJack&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serialnum</span><span class="p">)</span>

<div class="viewcode-block" id="LabJackT7.close"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the T7 device connection.</span>

<span class="sd">        &gt;&gt;&gt; ljt7.close()</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ljm</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Closed LabJack&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serialnum</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackT7.display_info"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.display_info">[docs]</a>    <span class="k">def</span> <span class="nf">display_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Display a summary with the T7 device information.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;____________________________________________________________&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Device Name........&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Serial Number......&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serialnum</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hardware Version...&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hardware</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Firmware Version...&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_firmware</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Connection Type....&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;IP Address.........&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ipaddress</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Port...............&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_port</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;____________________________________________________________&#39;</span><span class="p">)</span></div>

    <span class="c1"># I/O METHODS</span>
<div class="viewcode-block" id="LabJackT7.set_analog"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.set_analog">[docs]</a>    <span class="k">def</span> <span class="nf">set_analog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set analog output voltage.</span>


<span class="sd">        :param name: The port name to set the output voltage.</span>
<span class="sd">            Available ports are ``&#39;DAC0&#39;`` and ``&#39;DAC1&#39;``. Both ports can be</span>
<span class="sd">            set at the same time using a list containing the two names.</span>
<span class="sd">        :type name: str, list(str)</span>

<span class="sd">        :param value: The output voltage between ``0`` and ``5`` V. A list</span>
<span class="sd">            containing values can be used in conjunction with a list with the</span>
<span class="sd">            two port names.</span>
<span class="sd">        :type value: float, list(float)</span>


<span class="sd">        Set port ``&#39;DAC1&#39;`` output voltage to ``2.2`` V:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_analog(&#39;DAC1&#39;, 2.2)</span>

<span class="sd">        Set port ``&#39;DAC0&#39;`` output voltage to ``2.5`` V and ``&#39;DAC1&#39;`` to</span>
<span class="sd">        ``3.2`` V:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_analog([&#39;DAC0&#39;, &#39;DAC1&#39;], [2.5, 3.2])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Making sure inputs are lists</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">names</span><span class="p">]</span>
        <span class="c1"># Making sure values are ndarray of float64</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">double</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">values</span><span class="p">]</span>
        <span class="c1"># Doing other input checks</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Number of ports must match number of values.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="s2">&quot;DAC&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid analog output port name(s).&#39;</span><span class="p">)</span>
        <span class="c1"># Limiting analog values</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="nb">min</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
        <span class="c1"># Setting port values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_port_values</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackT7.get_analog"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.get_analog">[docs]</a>    <span class="k">def</span> <span class="nf">get_analog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get analog input voltage.</span>


<span class="sd">        :param name: THe port name (or list of names) to get the input voltage.</span>
<span class="sd">            Ports ``&#39;AIN0&#39;`` to ``&#39;AIN13&#39;`` are possible names and can read a</span>
<span class="sd">            range between -10 and +10V.</span>
<span class="sd">        :type name: str, list(str)</span>

<span class="sd">        :returns: The input voltage value.</span>
<span class="sd">        :rtype: float, list(float)</span>


<span class="sd">        Get input voltage on port ``&#39;AIN0&#39;``:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; ljt7.get_analog(&#39;AIN0&#39;)</span>

<span class="sd">        Get input voltages on ports ``&#39;AIN0&#39;``, ``&#39;AIN2&#39;`` and ``&#39;AIN3&#39;``:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; ljt7.get_analog([&#39;AIN0&#39;, &#39;AIN2&#39;, &#39;AIN3&#39;])</span>


<span class="sd">        .. note::</span>
<span class="sd">            1.  Ports that are not connected may have erratic readings.</span>
<span class="sd">            2.  See `set_range` and `set_reference` for more options on analog inputs.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Making sure inputs are lists</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">names</span><span class="p">]</span>
        <span class="c1"># Checking for valid analog input names</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="s2">&quot;AIN&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid analog input port name(s).&#39;</span><span class="p">)</span>
        <span class="c1"># Getting values</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_port_values</span><span class="p">(</span><span class="n">names</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackT7.set_digital"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.set_digital">[docs]</a>    <span class="k">def</span> <span class="nf">set_digital</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write the digital state to an output port.</span>
<span class="sd">        It also sets the port direction to output.</span>


<span class="sd">        :param name: The port name (or a list of names) to set the state.</span>
<span class="sd">        :type name: str, list(str)</span>

<span class="sd">        :param state: The digital state (or a list of states)</span>
<span class="sd">            `0 = Low`, `1 = High`.</span>
<span class="sd">        :type state: int, list(int)</span>


<span class="sd">        Set port ``&#39;FIO0&#39;`` bit to high:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; ljt7.set_digital(&#39;FIO0&#39;, 1)</span>

<span class="sd">        Set ports ``&#39;FIO0&#39;``, ``&#39;FIO1&#39;`` and ``&#39;FIO6&#39;`` bits to high,</span>
<span class="sd">        low and high:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_digital([&#39;FIO0&#39;, &#39;FIO1&#39;, &#39;FIO6&#39;], [1, 0, 1])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Making sure inputs are lists</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">names</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">values</span><span class="p">]</span>
        <span class="c1"># Doing other input checks</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Number of ports must match number of values.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="s2">&quot;DIO&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid digital I/O port name(s).&#39;</span><span class="p">)</span>
        <span class="c1"># Limiting digital values</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="nb">min</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
        <span class="c1"># Setting port values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_port_values</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackT7.get_digital"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.get_digital">[docs]</a>    <span class="k">def</span> <span class="nf">get_digital</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read the digital state from an input port.</span>
<span class="sd">        It also sets the port direction to input.</span>


<span class="sd">        :param name: The port name (or list of port names) to get the state.</span>
<span class="sd">        :type name: str, list(str)</span>

<span class="sd">        :returns: The state of the digital port. `0 = Low`, `1 = High`.</span>
<span class="sd">        :rtype: int, list(int)</span>


<span class="sd">        Get logic state on port ``&#39;FIO2&#39;``:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.get_digital(&#39;FIO2&#39;)</span>

<span class="sd">        Get logic states on ports ``&#39;FIO2&#39;``, ``&#39;FIO3&#39;`` and ``&#39;FIO7&#39;``:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.get_digital([&#39;FIO2&#39;, &#39;FIO3&#39;, &#39;FIO7&#39;])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">names</span><span class="p">]</span>
        <span class="c1"># Checking for valid analog input names</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="s2">&quot;DIO&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid digital I/O port name(s).&#39;</span><span class="p">)</span>
        <span class="c1"># Getting values</span>
        <span class="n">states</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_port_values</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">states</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">states</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">state</span></div>

    <span class="c1"># STREAMING METHODS</span>
<div class="viewcode-block" id="LabJackT7.set_stream"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.set_stream">[docs]</a>    <span class="k">def</span> <span class="nf">set_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">scanrate</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span> <span class="n">readrate</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                   <span class="n">clocksource</span><span class="o">=</span><span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="n">exttrigger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set and start data streaming.</span>


<span class="sd">        :param name: The port name (or list of names) to be streamed.</span>
<span class="sd">            Any analog and/or digital port can be used.</span>
<span class="sd">        :type name: str, list(str)</span>

<span class="sd">        :param scanrate:  The scan rate (Hz) of the data streaming. </span>
<span class="sd">            The default (and maximum) value is ``100000`` Hz. The effective</span>
<span class="sd">            scan frequency of each port is the scan rate divided by the</span>
<span class="sd">            number of scanned ports. When `clocksource` is equal to</span>
<span class="sd">            ``&#39;EXT&#39;``, `scanrate` is interpreted as the number of pulses per</span>
<span class="sd">            block of data.</span>
<span class="sd">        :type scanrate: int</span>

<span class="sd">        :param readrate: The rate in seconds at which blocks of data are</span>
<span class="sd">            retrieved from the data buffer by `get_stream`. The default value</span>
<span class="sd">            is ``0.5`` seconds. When `clocksource` is equal to ``&#39;EXT&#39;``,</span>
<span class="sd">            `readrate` is interpreted as the number of blocks of data to be</span>
<span class="sd">            retrieved each time.</span>
<span class="sd">        :type readrate: float</span>

<span class="sd">        :param clocksource: The source of the streaming clock.</span>
<span class="sd">            It indicates whether the LabJack internal clock or an external</span>
<span class="sd">            clock (pulse train) will be used. In the case of an external clock,</span>
<span class="sd">            the digital signal must be connected to ``&#39;CIO3&#39;`` (``&#39;DIO16&#39;``).</span>
<span class="sd">            The default value is ``&#39;INT&#39;``.</span>
<span class="sd">        :type clocksource: str</span>

<span class="sd">        :param exttrigger: The `DIO` port name containing an external trigger</span>
<span class="sd">            used to start the streaming.</span>
<span class="sd">        :type exttrigger: str</span>


<span class="sd">        Configure ``100000`` Hz streaming with ``0.5`` s data blocks from port</span>
<span class="sd">        ``&#39;AIN0&#39;``:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_stream(&#39;AIN0&#39;)</span>

<span class="sd">        Configure streaming for ``1`` s data blocks from analog and digital</span>
<span class="sd">        ports.</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_stream([&#39;AIN0&#39;, &#39;AIN1&#39;, &#39;DIO6&#39;, &#39;DIO7&#39;], readrate=1)</span>

<span class="sd">        Configure streaming for ``0.5`` s data blocks from analog ports.</span>
<span class="sd">        The scan rate is ``50000`` Samples/s (25000 S/s for each port):</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_stream([&#39;AIN0&#39;,&#39;AIN1&#39;], scanrate=50000)</span>

<span class="sd">        Configure streaming for 1 block of 1024 Samples/port per data retrieve.</span>
<span class="sd">        The external clock signal must be connected to ``&#39;CIO3&#39;``</span>
<span class="sd">        (``&#39;DIO16&#39;``):</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_stream([&#39;AIN0&#39;,&#39;AIN1&#39;], scanrate=1024, readrate=1, clocksource=&#39;EXT&#39;)</span>

<span class="sd">        Configure streaming for 3 blocks of 600 Samples/port.</span>
<span class="sd">        Port ``&#39;DIO1&#39;`` is connected to an external trigger that will start the</span>
<span class="sd">        streaming. The external clock signal must be connected to ``&#39;CIO3&#39;``</span>
<span class="sd">        (``&#39;DIO16&#39;``):</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_stream([&#39;AIN0&#39;,&#39;DIO0&#39;],</span>
<span class="sd">                                scanrate=600, readrate=3, clocksource=&#39;EXT&#39;,</span>
<span class="sd">                                exttrigger=&#39;DIO1&#39;)</span>


<span class="sd">        .. note::</span>
<span class="sd">            `exttrigger` port must use the `DIO` naming convention, i.e.: ports</span>
<span class="sd">            ``&#39;DIO0&#39;`` to ``&#39;DIO16&#39;``.</span>

<span class="sd">        .. note::</span>
<span class="sd">            Data streaming starts immediatelly after `set_stream` is invoked,</span>
<span class="sd">            unless `exttrigger` is used.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Making sure inputs are lists</span>
        <span class="n">names</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">names</span><span class="p">]</span>
        <span class="c1"># Checking for valid analog input names</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="s2">&quot;ALLIN&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid input port name(s).&#39;</span><span class="p">)</span>
        <span class="c1"># Limiting and interpreting scan rate</span>
        <span class="k">if</span> <span class="n">clocksource</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;INT&#39;</span><span class="p">:</span>
            <span class="n">maxrate</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">scanrate</span><span class="p">,</span> <span class="mi">100000</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">clocksource</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;EXT&#39;</span><span class="p">:</span>
            <span class="n">maxrate</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">scanrate</span><span class="o">*</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="mi">100000</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s1">&#39;Stream clock source must be either &quot;INT&quot; or &quot;EXT&quot;&#39;</span><span class="p">)</span>
        <span class="c1"># Adding core timer register name to shallow copy of port list</span>
        <span class="k">if</span> <span class="n">clocksource</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;EXT&quot;</span><span class="p">:</span>
            <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;CORE_TIMER&quot;</span><span class="p">)</span>
        <span class="c1"># Assining external clock trigger parameters</span>
        <span class="k">if</span> <span class="n">exttrigger</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">exttrigger</span><span class="p">,</span> <span class="s2">&quot;USER&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDIO</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Trigger must use DIO port naming.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_streamtrigger</span> <span class="o">=</span> <span class="n">exttrigger</span>
            <span class="n">triggernum</span> <span class="o">=</span> <span class="mi">2000</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_streamtrigger</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="c1"># Configuring clock source in LabJack</span>
        <span class="k">if</span> <span class="n">clocksource</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;INT&quot;</span><span class="p">:</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="s1">&#39;STREAM_CLOCK_SOURCE&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="s1">&#39;STREAM_CLOCK_SOURCE&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="c1"># Doing additional configuration changes for triggered external clock</span>
        <span class="k">if</span> <span class="n">exttrigger</span><span class="p">:</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">writeLibraryConfigS</span><span class="p">(</span>
                <span class="s1">&#39;LJM_STREAM_SCANS_RETURN&#39;</span><span class="p">,</span>
                <span class="n">ljm</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">STREAM_SCANS_RETURN_ALL</span><span class="p">)</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">writeLibraryConfigS</span><span class="p">(</span>
                <span class="s1">&#39;LJM_STREAM_RECEIVE_TIMEOUT_MS&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="s1">&#39;STREAM_TRIGGER_INDEX&#39;</span><span class="p">,</span> <span class="n">triggernum</span><span class="p">)</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamtrigger</span> <span class="o">+</span> <span class="s1">&#39;_EF_ENABLE&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamtrigger</span> <span class="o">+</span> <span class="s1">&#39;_EF_INDEX&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamtrigger</span> <span class="o">+</span> <span class="s1">&#39;_EF_CONFIG_A&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamtrigger</span> <span class="o">+</span> <span class="s1">&#39;_EF_ENABLE&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">writeLibraryConfigS</span><span class="p">(</span>
                <span class="s1">&#39;LJM_STREAM_SCANS_RETURN&#39;</span><span class="p">,</span>
                <span class="n">ljm</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">STREAM_SCANS_RETURN_ALL</span><span class="p">)</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">writeLibraryConfigS</span><span class="p">(</span>
                <span class="s1">&#39;LJM_STREAM_RECEIVE_TIMEOUT_MODE&#39;</span><span class="p">,</span>
                <span class="n">ljm</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">STREAM_RECEIVE_TIMEOUT_MODE_CALCULATED</span><span class="p">)</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="s1">&#39;STREAM_TRIGGER_INDEX&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Making sure read period is an integer for external clock</span>
        <span class="k">if</span> <span class="n">clocksource</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;EXT&#39;</span><span class="p">:</span>
            <span class="n">readrate</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">readrate</span><span class="p">)</span>
        <span class="c1"># Assigning streaming parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streamclock</span> <span class="o">=</span> <span class="n">clocksource</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streamnumports</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streamreadperiod</span> <span class="o">=</span> <span class="n">readrate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streamscanrate</span> <span class="o">=</span> <span class="n">maxrate</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_streamnumports</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streamscansperread</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_streamreadperiod</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_streamscanrate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streamTs</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_streamscanrate</span>
        <span class="c1"># Configuring and starting stream</span>
        <span class="n">addresses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_port_address</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
        <span class="n">ljm</span><span class="o">.</span><span class="n">eStreamStart</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamscansperread</span><span class="p">,</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">_streamnumports</span><span class="p">,</span> <span class="n">addresses</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamscanrate</span><span class="p">)</span>
        <span class="c1"># Ditching first block of data</span>
        <span class="k">if</span> <span class="n">clocksource</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;INT&#39;</span><span class="p">:</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">readrate</span><span class="p">)</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_stream</span><span class="p">()</span></div>

<div class="viewcode-block" id="LabJackT7.get_stream"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.get_stream">[docs]</a>    <span class="k">def</span> <span class="nf">get_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get streaming data block.</span>


<span class="sd">        :returns: 5-tuple</span>

<span class="sd">            * dt</span>
<span class="sd">            </span>
<span class="sd">                The sampling period (s) between each data point.</span>
<span class="sd">                When the streaming is configured with an external clock, `dt`</span>
<span class="sd">                contains the delta times between two consecutive samples.</span>

<span class="sd">            * data</span>

<span class="sd">                The numpy `m-by-n` array containing the streamed data where</span>
<span class="sd">                `m` is the number of samples per port in the block and `n`</span>
<span class="sd">                is the number of ports defined in `set_stream`</span>

<span class="sd">            * numscans</span>
<span class="sd">            </span>
<span class="sd">                The actual number of scans per port in the data block.</span>

<span class="sd">            * commbacklog</span>
<span class="sd">            </span>
<span class="sd">                The communication backlog in % (increasing values indicate that</span>
<span class="sd">                the computer cannot keep up with the data download from the T7</span>
<span class="sd">                driver)</span>

<span class="sd">            * devbacklog</span>
<span class="sd">            </span>
<span class="sd">                The T7 device backlog in % (increasing values indicate that the</span>
<span class="sd">                device cannot keep up with the data streaming - usually not</span>
<span class="sd">                the case)</span>

<span class="sd">        :rtype: (float, ndarray, int, float, float)</span>


<span class="sd">        Retrieve one data block:</span>

<span class="sd">            &gt;&gt;&gt; dt, datablock, commbacklog, T7backlog = ljt7.get_stream()</span>

<span class="sd">        Create the time array for the acquired block (internal clock):</span>

<span class="sd">            &gt;&gt;&gt; t = dt * np.linspace(0, datablock.shape[0]-1, datablock.shape[0])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Reading data block from LabJack</span>
        <span class="n">data</span><span class="p">,</span> <span class="n">commbacklog</span><span class="p">,</span> <span class="n">devbacklog</span> <span class="o">=</span> <span class="n">ljm</span><span class="o">.</span><span class="n">eStreamRead</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">)</span>
        <span class="c1"># Creating array from data</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="c1"># Separating interweaved ports into columns</span>
        <span class="n">ncol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamnumports</span>
        <span class="n">nrow</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">//</span><span class="n">ncol</span>
        <span class="n">valueaux</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">nrow</span><span class="o">*</span><span class="n">ncol</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">nrow</span><span class="p">,</span> <span class="n">ncol</span><span class="p">))</span>
        <span class="c1"># Checking for external clock</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamclock</span> <span class="o">==</span> <span class="s2">&quot;EXT&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">valueaux</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">dAux</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">valueaux</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">iaux</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">dAux</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">dAux</span><span class="p">[</span><span class="n">iaux</span><span class="p">]</span> <span class="o">=</span> <span class="mi">65535</span><span class="o">+</span><span class="n">valueaux</span><span class="p">[</span><span class="n">iaux</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">valueaux</span><span class="p">[</span><span class="n">iaux</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">dAux</span><span class="o">/</span><span class="mf">40e6</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">valueaux</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamTs</span>
        <span class="c1"># Assigning number of actual scans</span>
        <span class="n">numscans</span> <span class="o">=</span> <span class="n">nrow</span>
        <span class="c1"># Converting backlog outputs to % values</span>
        <span class="n">commbacklog</span> <span class="o">=</span> <span class="mi">100</span><span class="o">*</span><span class="n">commbacklog</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_streamscanrate</span>
        <span class="n">devbacklog</span> <span class="o">=</span> <span class="mi">100</span><span class="o">*</span><span class="n">devbacklog</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_streamscanrate</span>
        <span class="c1"># Returning outputs</span>
        <span class="k">return</span> <span class="n">dt</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">numscans</span><span class="p">,</span> <span class="n">commbacklog</span><span class="p">,</span> <span class="n">devbacklog</span></div>

<div class="viewcode-block" id="LabJackT7.stop_stream"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.stop_stream">[docs]</a>    <span class="k">def</span> <span class="nf">stop_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stop data streaming.</span>

<span class="sd">            &gt;&gt;&gt; ljt7.stop_stream()</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ljm</span><span class="o">.</span><span class="n">eStreamStop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">)</span></div>

    <span class="c1"># PWM METHODS</span>
<div class="viewcode-block" id="LabJackT7.set_pwm"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.set_pwm">[docs]</a>    <span class="k">def</span> <span class="nf">set_pwm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pwmnum</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">dirport1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dirport2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="mi">250</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configure PWM output.</span>


<span class="sd">        :param pwmnum: The number of PWM output signals.</span>
<span class="sd">            ``1`` or ``2`` PWMs can be used. For one PWM, the output port is</span>
<span class="sd">            ``&#39;FIO0&#39;``. For two PWMs, the output ports are ``&#39;FIO0&#39;`` and </span>
<span class="sd">            ``&#39;FIO4&#39;``.</span>
<span class="sd">        :type pwmnum: int</span>

<span class="sd">        :param dirport1: The type of ports that control the PWM `direction`</span>
<span class="sd">            for electric motor control. There are three options:</span>

<span class="sd">            * ``None``  - Default value (no direction ports are used)</span>
<span class="sd">            * ``&#39;DAC&#39;`` - Uses analog ports ``&#39;DAC0&#39;`` and ``&#39;DAC1&#39;``</span>
<span class="sd">            * ``&#39;DIO&#39;`` - Uses digital ports ``&#39;EIO0&#39;`` and ``&#39;EIO1&#39;``</span>

<span class="sd">        :type dirport1: None, str</span>

<span class="sd">        :param dirport2: Same as `dirport1`.</span>
<span class="sd">            It&#39;s used when two PWM outputs are enabled. The ``&#39;DAC&#39;`` option</span>
<span class="sd">            can only be used for one set of direction ports, unless the two</span>
<span class="sd">            motors are running synchronously. For the ``&#39;DIO&#39;`` option,</span>
<span class="sd">            digital ports ``&#39;EIO2&#39;`` and ``&#39;EIO3&#39;`` are used.</span>
<span class="sd">        :type dirport2: None, str</span>

<span class="sd">        :param frequency: The PWM signal frequency in Hz.</span>
<span class="sd">            In the case of two PWMs, both will have the same frequency</span>
<span class="sd">        :type frequency: int</span>


<span class="sd">        Set 1 PWM for motor control on ``&#39;FIO0&#39;`` with direction ports on</span>
<span class="sd">        ``&#39;DAC0&#39;`` and ``&#39;DAC1&#39;``. The PWM frequency is the default ``250`` Hz:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_pwm(dirport1=&#39;DAC&#39;)</span>

<span class="sd">        Set 2 PWMs on ports ``&#39;FIO0&#39;`` and ``&#39;FIO4&#39;`` with a frequency of</span>
<span class="sd">        ``500`` Hz:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; ljt7.set_pwm(pwmnum=2, frequency=500)</span>

<span class="sd">        Set 2 PWMs for motor control on ports ``&#39;FIO0&#39;`` and ``&#39;FIO4&#39;``, using</span>
<span class="sd">        the digital ports ``&#39;EIO0&#39;`` and ``&#39;EIO1&#39;`` for motor 1 direction, and</span>
<span class="sd">        ``&#39;EIO2&#39;`` and ``&#39;EIO3&#39;`` for motor 2 direction. The PWM frequency is</span>
<span class="sd">        ``750`` Hz:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; ljt7.set_pwm(pwmnum=2, dirport1=&#39;DIO&#39;, dirport2=&#39;DIO&#39;, frequency=750)</span>


<span class="sd">        .. note::</span>
<span class="sd">            When using digital ports, a 10 kOhm resistor has to be connected from</span>
<span class="sd">            the LabJack `VS` port to each one of the `DIO` ports to ensure true</span>
<span class="sd">            `high` and `low` states.</span>

<span class="sd">        .. note::</span>
<span class="sd">            Two PWMs and two encoders can be setup at the same time on the T7 device.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Checking number of PWM outputs and direction ports</span>
        <span class="n">dirport</span> <span class="o">=</span> <span class="p">[</span><span class="n">dirport1</span><span class="p">,</span> <span class="n">dirport2</span><span class="p">]</span>
        <span class="n">pwmname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;DIO0&#39;</span><span class="p">]</span>
        <span class="n">pwmdir</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;DAC&#39;</span><span class="p">:</span>
            <span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;DAC0&#39;</span><span class="p">,</span> <span class="s1">&#39;DAC1&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;DIO&#39;</span><span class="p">:</span>
            <span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;EIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO1&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">pwmnum</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">pwmname</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;DIO4&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">pwmdir</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;DAC&#39;</span><span class="p">:</span>
                <span class="n">pwmdir</span><span class="o">.</span><span class="n">append</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;DAC0&#39;</span><span class="p">,</span> <span class="s1">&#39;DAC1&#39;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">dirport</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;DIO&#39;</span><span class="p">:</span>
                <span class="n">pwmdir</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;EIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO3&#39;</span><span class="p">])</span>
        <span class="c1"># Assigning PWM attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmnum</span> <span class="o">=</span> <span class="n">pwmnum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmname</span> <span class="o">=</span> <span class="n">pwmname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmdir</span> <span class="o">=</span> <span class="n">pwmdir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pwmfreq</span> <span class="o">=</span> <span class="n">frequency</span>
        <span class="c1"># Calculating clock roll value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clockrollval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_corefreq</span><span class="o">/</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clockdivisor</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_pwmfreq</span><span class="p">)</span>
        <span class="c1"># Configuring clock registers</span>
        <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="s1">&#39;DIO_EF_CLOCK0_ENABLE&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="s1">&#39;DIO_EF_CLOCK0_DIVISOR&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clockdivisor</span><span class="p">)</span>
        <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="s1">&#39;DIO_EF_CLOCK0_ROLL_VALUE&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clockrollval</span><span class="p">)</span>
        <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="s1">&#39;DIO_EF_CLOCK0_ENABLE&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="c1"># Configuring extended feature (EF) registers for selected PWM port</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">pwmname</span><span class="p">:</span>
            <span class="c1"># Disable the EF system for initial configuration</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_EF_ENABLE&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1"># Configure EF system for PWM</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_EF_INDEX&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1"># Configure what clock source to use: Clock0</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_EF_OPTIONS&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1"># Configure duty cycle to be: 0%</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_EF_CONFIG_A&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1"># Enable the EF system, PWM wave is now being outputted</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_EF_ENABLE&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackT7.set_dutycycle"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.set_dutycycle">[docs]</a>    <span class="k">def</span> <span class="nf">set_dutycycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">brake1</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">brake2</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set PWM duty cycle value.</span>


<span class="sd">        :param value1: The PWM 1 duty cycle percent value between ``-100``</span>
<span class="sd">            and ``100``.</span>
<span class="sd">        :type value1: float</span>

<span class="sd">        :param value2: The PWM 2 duty cycle percent value between ``-100``</span>
<span class="sd">            and ``100``.</span>
<span class="sd">        :type value2: float</span>

<span class="sd">        :param brake1: The motor 1 brake option used when dutycycle is zero.</span>
<span class="sd">            Brake is applied when ``True``. Motor is floating when ``False``.</span>
<span class="sd">        :type brake1: bool</span>

<span class="sd">        :param brake2: The motor 2 brake option used when dutycycle is zero.</span>
<span class="sd">            Brake is applied when ``True``. Motor is floating when ``False``.</span>
<span class="sd">        :type brake2: bool</span>


<span class="sd">        Set duty cycle to ``50`` % on PWM 1:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_dutycycle(value1=50)</span>

<span class="sd">        Set duty cycle to ``25`` % (reverse rotation) on PWM 2:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_dutycycle(value2=-25)</span>

<span class="sd">        Set duty cycle to ``20`` % and ``40`` % on PWMs 1 and 2:</span>
<span class="sd">  </span>
<span class="sd">            &gt;&gt;&gt; ljt7.set_dutycycle(value1=20, value2=40)</span>

<span class="sd">        Stop motor 2 and apply brake:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_dutycycle(value2=0, brake2=True)</span>


<span class="sd">        .. note::</span>
<span class="sd">            1. Avoid suddenly switching the direction of rotation to avoid damaging the motor.</span>
<span class="sd">            2. You can use the brake option True to hold the motor in position.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">value1</span><span class="p">,</span> <span class="n">value2</span><span class="p">]</span>
        <span class="n">brakes</span> <span class="o">=</span> <span class="p">[</span><span class="n">brake1</span><span class="p">,</span> <span class="n">brake2</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">value</span><span class="p">,</span> <span class="n">brake</span><span class="p">,</span> <span class="n">pwmdir</span><span class="p">,</span> <span class="n">pwmtype</span><span class="p">,</span> <span class="n">pwmname</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
            <span class="n">values</span><span class="p">,</span> <span class="n">brakes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pwmdir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pwmtype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pwmname</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Applying bounds to inputs</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="mi">100</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">100</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100</span>
                <span class="c1"># Applying PWM direction</span>
                <span class="k">if</span> <span class="n">pwmdir</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="c1"># Forward rotation</span>
                        <span class="k">if</span> <span class="n">pwmtype</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">,</span> <span class="p">[</span><span class="mf">4.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">get_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="k">elif</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="c1"># Reverse rotation</span>
                        <span class="k">if</span> <span class="n">pwmtype</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">get_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="c1"># Brake stop</span>
                        <span class="k">if</span> <span class="n">brake</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">pwmtype</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">pwmtype</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">,</span> <span class="p">[</span><span class="mf">4.5</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">])</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">get_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">get_digital</span><span class="p">(</span><span class="n">pwmdir</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="c1"># Calculating duty cycle</span>
                <span class="n">dutycycle</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">/</span><span class="mi">100</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_clockrollval</span><span class="p">)</span>
                <span class="c1"># Setting timer duty cycle to desired value</span>
                <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">pwmname</span> <span class="o">+</span> <span class="s1">&#39;_EF_CONFIG_A&#39;</span><span class="p">,</span> <span class="n">dutycycle</span><span class="p">)</span></div>

    <span class="c1"># QUADRATURE ENCODER METHODS</span>
<div class="viewcode-block" id="LabJackT7.set_quadrature"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.set_quadrature">[docs]</a>    <span class="k">def</span> <span class="nf">set_quadrature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quadnum</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">zphase1</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">zphase2</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configure quadrature encoder input.</span>


<span class="sd">        :param quadnum: The number of quadrature input signals.</span>
<span class="sd">            ``1`` or ``2`` encoders can be used. For one encoder, the input</span>
<span class="sd">            ports are ``&#39;FIO2&#39;`` and ``&#39;FIO3&#39;``. For two encoders, the input</span>
<span class="sd">            ports for the second one are ``&#39;FIO6&#39;`` and ``&#39;FIO7&#39;``. </span>
<span class="sd">        :type quadnum: int</span>

<span class="sd">        :param zphase1: The logic value indicating if a `Z` phase reference</span>
<span class="sd">            pulse is used for the first encoder. Port ``&#39;FIO1&#39;`` is used. </span>
<span class="sd">        :type zphase1: bool</span>

<span class="sd">        :param zphase2: The logic value indicating if a `Z` phase reference</span>
<span class="sd">            pulse is used for the second encoder. Port ``&#39;FIO1&#39;`` is used for</span>
<span class="sd">            the first encoder and port ``&#39;FIO5&#39;`` is used for the second </span>
<span class="sd">            encoder. `zphase2` is ignored if `quadnum` = ``1``.</span>
<span class="sd">        :type zphase1: bool</span>


<span class="sd">        Set ports ``&#39;FIO2&#39;`` and ``&#39;FIO3&#39;`` for encoder with phase `A` and `B`</span>
<span class="sd">        signals only:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; ljt7.set_quadrature()</span>

<span class="sd">        Set ports ``&#39;FIO2&#39;`` and ``&#39;FIO3&#39;`` for encoder phase `A` and `B`</span>
<span class="sd">        signals, and port ``&#39;FIO1&#39;`` for the reference `Z` phase:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; ljt7.set_quadrature(zphase1=True)</span>

<span class="sd">        Set 2 encoders with `Z` phase. `A` and `B` phases are on ports</span>
<span class="sd">        ``&#39;FIO2&#39;`` and ``&#39;FIO3&#39;`` for encoder 1, and ``&#39;FIO6&#39;`` and ``&#39;FIO7&#39;``</span>
<span class="sd">        for encoder 2. The `Z` phase ports are respectively ``&#39;FIO1&#39;`` and</span>
<span class="sd">        ``&#39;FIO5&#39;``:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_quadrature(quadnum=2, zphase1=True, zphase2=True)</span>


<span class="sd">        .. note::</span>
<span class="sd">            Two PWMs and two encoders can be setup at the same time on the T7 device.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Selecting port numbers based on input options</span>
        <span class="k">if</span> <span class="n">quadnum</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">quadnameAB</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;DIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO3&#39;</span><span class="p">]]</span>
            <span class="n">portnumZ</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">zphase1</span><span class="p">:</span>
                <span class="n">portnumZ</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">quadnum</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">quadnameAB</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;DIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO3&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;DIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO7&#39;</span><span class="p">]]</span>
            <span class="n">portnumZ</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">zphase1</span><span class="p">:</span>
                <span class="n">portnumZ</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">zphase2</span><span class="p">:</span>
                <span class="n">portnumZ</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Only 1 or 2 quadrature inputs can be assigned.&#39;</span><span class="p">)</span>
        <span class="c1"># Assigning quadrature properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zphase</span> <span class="o">=</span> <span class="p">[</span><span class="n">zphase1</span><span class="p">,</span> <span class="n">zphase2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_quadnum</span> <span class="o">=</span> <span class="n">quadnum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_quadnameAB</span> <span class="o">=</span> <span class="n">quadnameAB</span>
        <span class="c1">#</span>
        <span class="c1"># Configuring extended feature (EF) registers for</span>
        <span class="c1"># selected A-B ports and optional Z phase port</span>
        <span class="c1">#</span>
        <span class="c1"># Disabling the EF system for initial configuration</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">quadnameAB</span><span class="p">,</span> <span class="n">portnumZ</span><span class="p">):</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_ENABLE&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_ENABLE&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1"># Configure EF system for qudrature</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_INDEX&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_INDEX&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
            <span class="c1"># Configuring port Z</span>
            <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_CONFIG_A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_CONFIG_B&#39;</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>
                <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_CONFIG_A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_CONFIG_B&#39;</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_CONFIG_A&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_CONFIG_A&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1"># Enabling the EF system</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_ENABLE&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_ENABLE&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackT7.get_counter"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.get_counter">[docs]</a>    <span class="k">def</span> <span class="nf">get_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get current quadrature counter value.</span>


<span class="sd">        :returns: The counter value or a list with 2 values for 2 encoders.</span>
<span class="sd">        :rtype: int, list(int)</span>

<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; ljt7.get_counter()</span>


<span class="sd">        .. note::</span>
<span class="sd">            Because the qudrature counter counts rising and falling edges</span>
<span class="sd">            of phases `A` and `B`, a 1024 pulse/rev encoder will generate 4096</span>
<span class="sd">            counts for a full shaft turn.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_port_values</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_quadnameAB</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_READ_A_F&#39;</span><span class="p">])]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadnum</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_port_values</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_quadnameAB</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_READ_A_F&#39;</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">value</span></div>

<div class="viewcode-block" id="LabJackT7.reset_counter"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.reset_counter">[docs]</a>    <span class="k">def</span> <span class="nf">reset_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter1</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">counter2</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset quadrature counter value.</span>


<span class="sd">        :param counter1: The flag indicating whether to reset counter 1 or not.</span>
<span class="sd">            The default value is ``True`` and it resets the counter.</span>
<span class="sd">        :type counter1: bool</span>

<span class="sd">        :param counter2: The flag indicating whether to reset counter 2 or not.</span>
<span class="sd">            The default value is ``True`` and it resets the counter.</span>
<span class="sd">        :type counter2: bool</span>


<span class="sd">        Resets current counter value of all encoders.</span>

<span class="sd">            &gt;&gt;&gt; ljt7.reset_counter()</span>

<span class="sd">        Resets current counter value only for second encoder.</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; ljt7.reset_counter(counter1=False)</span>


<span class="sd">        .. note::</span>
<span class="sd">            The count is only reset when a `Z` phase isn&#39;t being used.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zphase</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">counter1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_port_values</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_quadnameAB</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_READ_A_AND_RESET&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadnum</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zphase</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">counter2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_get_port_values</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_quadnameAB</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_EF_READ_A_AND_RESET&#39;</span><span class="p">])</span></div>

    <span class="c1"># THERMOCOUPLE METHODS</span>
<div class="viewcode-block" id="LabJackT7.get_labjacktemp"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.get_labjacktemp">[docs]</a>    <span class="k">def</span> <span class="nf">get_labjacktemp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get ambient temperature from LabJack&#39;s internal sensor.</span>


<span class="sd">        :param unit: The temperature measurement unit.</span>
<span class="sd">            Valid values are ``&#39;C&#39;`` or ``&#39;F&#39;``. Default unit is ``&#39;C&#39;``.</span>
<span class="sd">        :type unit: str</span>

<span class="sd">        :returns: The internal sensor temperature reading.</span>
<span class="sd">        :rtype: float</span>


<span class="sd">        Get temperature reading in `Celsius`:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.get_labjacktemp()</span>

<span class="sd">        Get temperature reading in `Fahrenheit`:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; ljt7.get_labjacktemp(unit=&#39;F&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">ljm</span><span class="o">.</span><span class="n">eReadName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="s1">&#39;AIN14&#39;</span><span class="p">)</span>
        <span class="n">tempabs</span> <span class="o">=</span> <span class="o">-</span><span class="mf">92.6</span><span class="o">*</span><span class="n">v</span> <span class="o">+</span> <span class="mf">467.6</span>
        <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;K&#39;</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">tempabs</span>
        <span class="k">elif</span> <span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">tempabs</span> <span class="o">-</span> <span class="mf">273.15</span>
        <span class="k">elif</span> <span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;F&#39;</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="mi">9</span><span class="o">/</span><span class="mi">5</span><span class="o">*</span><span class="p">(</span><span class="n">tempabs</span><span class="o">-</span><span class="mf">273.15</span><span class="p">)</span> <span class="o">+</span> <span class="mi">32</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Temperature units must be either &#39;C&#39; or &#39;F&#39;.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">temp</span></div>

<div class="viewcode-block" id="LabJackT7.set_TC"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.set_TC">[docs]</a>    <span class="k">def</span> <span class="nf">set_TC</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">types</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set configuration for thermocouple input.</span>

<span class="sd">        :param names: The analog port(s) that will be used for thermocouple</span>
<span class="sd">            input. Ports ``&#39;AIN0&#39;`` to ``&#39;AIN3&#39;`` are recommended for higher</span>
<span class="sd">            measurement accuracy. The negative thermocouple wire should be</span>
<span class="sd">            connected to the LabJack `GND`.</span>
<span class="sd">        :type names: str, list(str)</span>

<span class="sd">        :param types: The thermocouple type.</span>
<span class="sd">            It can be a single string or a list with same length as `names`.</span>
<span class="sd">            Valid types are: ``&#39;B&#39;``, ``&#39;E&#39;``, ``&#39;J&#39;``, ``&#39;K&#39;``, ``&#39;N&#39;``,</span>
<span class="sd">            ``&#39;R&#39;``, ``&#39;S&#39;``, ``&#39;T&#39;``, and ``&#39;C&#39;``.</span>
<span class="sd">        :type types: str, list(str)</span>

<span class="sd">        :param unit:  The temperature measurement unit.</span>
<span class="sd">            Valid values are ``&#39;C&#39;`` or ``&#39;F&#39;``. Default unit is ``&#39;C&#39;``.</span>
<span class="sd">        :type unit: str</span>


<span class="sd">        Set port ``&#39;AIN0&#39;`` for thermocouple type ``&#39;K&#39;``:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; ljt7.set_TC(&#39;AIN0&#39;, &#39;K&#39;)</span>

<span class="sd">        Set ports ``&#39;AIN0&#39;``, ``&#39;AIN2&#39;``, and ``&#39;AIN3&#39;`` for thermocouples</span>
<span class="sd">        type ``&#39;K&#39;`` and ``&#39;J&#39;`` with measurement in Fahrenheit:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_TC([&#39;AIN0&#39;, &#39;AIN2&#39;, &#39;AIN3&#39;], [&#39;K&#39;, &#39;J&#39;, &#39;J&#39;], unit=&#39;F&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_TCoptions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;J&#39;</span><span class="p">,</span> <span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="s1">&#39;N&#39;</span><span class="p">,</span> <span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">]</span>
        <span class="c1"># Checking for valid inputs</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span> <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">names</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">types</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span> <span class="n">types</span> <span class="o">=</span> <span class="p">[</span><span class="n">types</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">types</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">types</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Number of ports must match number of types.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="s2">&quot;AIN&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Analog input port(s) are required for TC setup.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">unit</span> <span class="o">!=</span> <span class="s1">&#39;C&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">unit</span> <span class="o">!=</span> <span class="s1">&#39;F&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Temperature units must be either &#39;degC&#39; or &#39;degF&#39;.&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">tipe</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">tipe</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_TCoptions</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid TC type.&#39;</span><span class="p">)</span>
        <span class="c1"># Assining TC attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_TCnames</span> <span class="o">=</span> <span class="n">names</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">types</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_TCtypes</span> <span class="o">=</span> <span class="n">types</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_TCtypes</span> <span class="o">=</span> <span class="n">types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_TCunit</span> <span class="o">=</span> <span class="n">unit</span>
        <span class="c1"># Assigning TC type number</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_TCtypenum</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6001</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_TCoptions</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">tipe</span><span class="p">)</span> <span class="k">for</span> <span class="n">tipe</span> <span class="ow">in</span> <span class="n">types</span><span class="p">]</span>
        <span class="c1"># Setting TC analog port ranges to +/- 0.1V</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_RANGE&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackT7.get_TCtemp"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.get_TCtemp">[docs]</a>    <span class="k">def</span> <span class="nf">get_TCtemp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get thermocouple temperature reading.</span>


<span class="sd">        :returns: The temperature readings for the thermocouples defined</span>
<span class="sd">            using `set_TC`.</span>
<span class="sd">        :rtype: float, list(float)</span>


<span class="sd">        Get temperature from thermocouples:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.get_TCtemp()</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Getting LabJack cold joint temperature</span>
        <span class="n">TCJ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_labjacktemp</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;K&#39;</span><span class="p">)</span>
        <span class="c1"># Getting TC voltage and convertng it to temperature</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_analog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_TCnames</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span>
        <span class="n">tempabs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">typ</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_TCtypenum</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
            <span class="n">tempabs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ljm</span><span class="o">.</span><span class="n">tcVoltsToTemp</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">TCJ</span><span class="p">))</span>
        <span class="c1"># Converting to TC unit</span>
        <span class="n">tempabs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">tempabs</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_TCunit</span> <span class="o">==</span> <span class="s1">&#39;K&#39;</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">tempabs</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_TCunit</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">tempabs</span> <span class="o">-</span> <span class="mf">273.15</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_TCunit</span> <span class="o">==</span> <span class="s1">&#39;F&#39;</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="mi">9</span><span class="o">/</span><span class="mi">5</span><span class="o">*</span><span class="p">(</span><span class="n">tempabs</span><span class="o">-</span><span class="mf">273.15</span><span class="p">)</span> <span class="o">+</span> <span class="mi">32</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">temp</span></div>

    <span class="c1"># OTHER METHODS</span>
<div class="viewcode-block" id="LabJackT7.set_reference"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.set_reference">[docs]</a>    <span class="k">def</span> <span class="nf">set_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;single-ended&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set reference point for analog input voltage.</span>


<span class="sd">        :param names: The analog port(s) that will that will have the voltage</span>
<span class="sd">            reference point modified.</span>
<span class="sd">        :type names: str, list(str)</span>

<span class="sd">        :param mode: The reference mode for the analog ports.</span>
<span class="sd">            It and can be either ``&#39;single-ended&#39;`` or ``&#39;differential&#39;``.</span>
<span class="sd">            Default is ``&#39;single-ended&#39;``. Use ``&#39;ALL&#39;`` to set all analog</span>
<span class="sd">            input ports to the same mode.</span>
<span class="sd">        :type mode: str</span>


<span class="sd">        Set port ``&#39;AIN0&#39;`` for differential reading with port ``&#39;AIN1&#39;``:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_reference(&#39;AIN0&#39;, differential&#39;)</span>

<span class="sd">        Set ports ``&#39;AIN0&#39;``, ``&#39;AIN2&#39;``, and ``&#39;AIN6&#39;`` for differential</span>
<span class="sd">        reading respecitvely with ports ``&#39;AIN1&#39;``, ``&#39;AIN3&#39;``, and ``&#39;AIN7&#39;``:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_reference([&#39;AIN0&#39;, &#39;AIN2&#39;, &#39;AIN6&#39;], &#39;differential&#39;)</span>

<span class="sd">        Set all ports for single-ended reading:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; ljt7.set_reference(&#39;ALL&#39;, &#39;single-ended&#39;)</span>


<span class="sd">        .. note::</span>
<span class="sd">            Differential reading uses two consecutive even-odd ports.</span>
<span class="sd">            Valid ports for differential reading are AIN0/2/4/6/8/10/12.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Checking for valid inputs</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span> <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">names</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">mode</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;single-ended&#39;</span><span class="p">,</span> <span class="s1">&#39;differential&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Valid reference types are &#39;single-ended&#39; or &#39;differential&#39;.&quot;</span><span class="p">)</span>
        <span class="c1"># Assigning range values</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">numref</span> <span class="o">=</span> <span class="mi">199</span>
            <span class="k">if</span> <span class="n">mode</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;differential&#39;</span><span class="p">:</span>
                <span class="n">numref</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="s1">&#39;AIN_ALL_NEGATIVE_CH&#39;</span><span class="p">,</span> <span class="n">numref</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="s2">&quot;AIN&quot;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid analog input port name(s).&#39;</span><span class="p">)</span>
            <span class="n">flagport</span><span class="p">,</span> <span class="n">portnum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_portdiff</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">flagport</span><span class="p">:</span>
                <span class="n">numref</span> <span class="o">=</span> <span class="mi">199</span>
                <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">portnum</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">mode</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;differential&#39;</span><span class="p">:</span>
                        <span class="n">numref</span> <span class="o">=</span> <span class="n">num</span> <span class="o">+</span> <span class="mi">1</span>
                    <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_NEGATIVE_CH&#39;</span><span class="p">,</span> <span class="n">numref</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Valid analog ports are AIN0/2/4/6/8/10/12.&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabJackT7.set_range"><a class="viewcode-back" href="../LabJackT7.html#devices.LabJackT7.set_range">[docs]</a>    <span class="k">def</span> <span class="nf">set_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">ranges</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set analog input voltage range.</span>


<span class="sd">        :param names: The analog port(s) that will have their ranges modified.</span>
<span class="sd">            Use ``&#39;ALL&#39;`` to set all analog input ports to the same range.</span>
<span class="sd">        :type names: str, list(str)</span>

<span class="sd">        :param ranges: The voltage range value to be used.</span>
<span class="sd">            Valid ranges are +/- ``10``, ``1``, ``0.1``, ``0.01`` V. If a</span>
<span class="sd">            single value is used, it will be applied to all ports in</span>
<span class="sd">            `names`.</span>
<span class="sd">        :type ranges: float, list(float)</span>


<span class="sd">        Set port ``&#39;AIN0&#39;`` with a range of +/- ``1`` V:</span>
<span class="sd">       </span>
<span class="sd">            &gt;&gt;&gt; ljt7.set_range(&#39;AIN0&#39;, 1)</span>

<span class="sd">        Set port ``&#39;AIN0&#39;`` and ``&#39;AIN2&#39;`` with a range of +/- ``0.1`` and</span>
<span class="sd">        ``0.01`` V:</span>

<span class="sd">            &gt;&gt;&gt; ljt7.set_range([&#39;AIN0&#39;, &#39;AIN2&#39;], [0.1, 0.01])</span>

<span class="sd">        Set all ports with a (default) range of +/- ``10`` V:</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; ljt7.set_range(&#39;ALL&#39;, 10)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Checking for valid inputs</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span> <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">names</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">ranges</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span> <span class="n">ranges</span> <span class="o">=</span> <span class="p">[</span><span class="n">ranges</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ranges</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ranges</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Number of ports must match number of ranges.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ranges</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">ranges</span> <span class="o">=</span> <span class="n">ranges</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">ranges</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Valid ranges are 10, 1, 0.1, or 0.01 V.&#39;</span><span class="p">)</span>
        <span class="c1"># Assigning range values</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="s1">&#39;AIN_ALL_RANGE&#39;</span><span class="p">,</span> <span class="n">ranges</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_port</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="s2">&quot;AIN&quot;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid analog input port name(s).&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">ranges</span><span class="p">):</span>
                <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_RANGE&#39;</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span></div>

    <span class="c1"># HELPER METHODS (PRIVATE)</span>
    <span class="k">def</span> <span class="nf">_assign_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
        <span class="c1"># Assigning info collected from LabJack handle to private attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="s2">&quot;T&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_serialnum</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">info</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="s2">&quot;USB&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ipaddress</span> <span class="o">=</span> <span class="s2">&quot;N/A&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_port</span> <span class="o">=</span> <span class="s2">&quot;N/A&quot;</span>
        <span class="k">elif</span> <span class="n">info</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="s2">&quot;TCP&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ipaddress</span> <span class="o">=</span> <span class="n">ljm</span><span class="o">.</span><span class="n">numberToIP</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_port</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">info</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="s2">&quot;ETHERNET&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ipaddress</span> <span class="o">=</span> <span class="s2">&quot;N/A&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_port</span> <span class="o">=</span> <span class="s2">&quot;N/A&quot;</span>
        <span class="k">elif</span> <span class="n">info</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="s2">&quot;WIFI&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ipaddress</span> <span class="o">=</span> <span class="n">ljm</span><span class="o">.</span><span class="n">numberToIP</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_port</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="s2">&quot;Unknown&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ipaddress</span> <span class="o">=</span> <span class="s2">&quot;Unknown&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_port</span> <span class="o">=</span> <span class="s2">&quot;Unknown&quot;</span>
        <span class="c1"># More stuff</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">ljm</span><span class="o">.</span><span class="n">eReadName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="s1">&#39;HARDWARE_VERSION&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hardware</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">ljm</span><span class="o">.</span><span class="n">eReadName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="s1">&#39;FIRMWARE_VERSION&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_firmware</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_assign_ports</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates lists with valid LabJAck T7 port names</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Assigning analog output port names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_portDAC</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;DAC0&#39;</span><span class="p">,</span> <span class="s1">&#39;DAC1&#39;</span><span class="p">]</span>
        <span class="c1"># Assigning analog inout port names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_portAIN</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;AIN0&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN1&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN2&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN3&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN4&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN5&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN6&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN7&#39;</span><span class="p">,</span>
            <span class="s1">&#39;AIN8&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN9&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN10&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN11&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN12&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN13&#39;</span><span class="p">,</span> <span class="s1">&#39;AIN14&#39;</span><span class="p">]</span>
        <span class="c1"># Assigning digital I/O port names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_portDIO</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;DIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO5&#39;</span><span class="p">,</span>
            <span class="s1">&#39;DIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO7&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO8&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO9&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO10&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO11&#39;</span><span class="p">,</span>
            <span class="s1">&#39;DIO12&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO13&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO14&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO15&#39;</span><span class="p">,</span> <span class="s1">&#39;DI16&#39;</span><span class="p">,</span> <span class="s1">&#39;DI17&#39;</span><span class="p">,</span>
            <span class="s1">&#39;DIO18&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO19&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO20&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO21&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO22&#39;</span><span class="p">]</span>
        <span class="c1"># Assigning alternate digital I/O port names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_portDIOAlt</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;FIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO5&#39;</span><span class="p">,</span>
            <span class="s1">&#39;FIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO7&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO3&#39;</span><span class="p">,</span>
            <span class="s1">&#39;EIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO5&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;EIO7&#39;</span><span class="p">,</span> <span class="s1">&#39;CIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;CIO1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;CIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;CIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;MIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;MIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;MIO2&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_check_port</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">namelist</span><span class="p">,</span> <span class="n">portype</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the port NAMES belong to the possible values in</span>
<span class="sd">        the correposnding PORTTYPE list of valid names. If all NAMES</span>
<span class="sd">        are valid then FLAGPORT = 1, otherwise FLAGPORT = 0</span>

<span class="sd">        A user defined list can be passed with PORTYPE = &#39;USER&#39;</span>
<span class="sd">        through an additional argument VARARGIN</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Making sure inputs are lists</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">namelist</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">namelist</span> <span class="o">=</span> <span class="p">[</span><span class="n">namelist</span><span class="p">]</span>
        <span class="c1"># Assining valid names list based on port type</span>
        <span class="k">if</span> <span class="n">portype</span> <span class="o">==</span> <span class="s2">&quot;DAC&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDAC</span>
        <span class="k">elif</span> <span class="n">portype</span> <span class="o">==</span> <span class="s2">&quot;AIN&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portAIN</span>
        <span class="k">elif</span> <span class="n">portype</span> <span class="o">==</span> <span class="s2">&quot;DIO&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDIO</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDIOAlt</span>
        <span class="k">elif</span> <span class="n">portype</span> <span class="o">==</span> <span class="s2">&quot;ALLIN&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portAIN</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDIO</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDIOAlt</span>
        <span class="k">elif</span> <span class="n">portype</span> <span class="o">==</span> <span class="s2">&quot;PWM&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s1">&#39;DIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO5&#39;</span><span class="p">,</span>
                <span class="s1">&#39;FIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO4&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO5&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">portype</span> <span class="o">==</span> <span class="s2">&quot;QUAD&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s1">&#39;DIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;DIO7&#39;</span><span class="p">,</span>
                <span class="s1">&#39;FIO0&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO1&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO2&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO6&#39;</span><span class="p">,</span> <span class="s1">&#39;FIO7&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">portype</span> <span class="o">==</span> <span class="s2">&quot;USER&quot;</span><span class="p">:</span>
            <span class="n">validnames</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># Returns true if all names in namelist are validnames</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">([</span><span class="n">name</span> <span class="ow">in</span> <span class="n">validnames</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">namelist</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_check_portdiff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
        <span class="c1"># Making sure inputs are lists</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">names</span><span class="p">]</span>
        <span class="c1"># Getting port name digits</span>
        <span class="n">portnum</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d+&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">]</span>
        <span class="c1"># Checking for all even digits</span>
        <span class="n">flagport</span> <span class="o">=</span> <span class="nb">all</span><span class="p">([(</span><span class="n">num</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">portnum</span><span class="p">])</span>
        <span class="c1"># Checking for AIN14</span>
        <span class="k">if</span> <span class="mi">14</span> <span class="ow">in</span> <span class="n">portnum</span><span class="p">:</span>
            <span class="n">flagport</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># Returning flag and port numbers</span>
        <span class="k">return</span> <span class="n">flagport</span><span class="p">,</span> <span class="n">portnum</span>

    <span class="k">def</span> <span class="nf">_get_portalt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the alternate DIO port name corresponding to the input NAME</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Making sure input is a not list</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">portnum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDIO</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">portalt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_portDIOAlt</span><span class="p">[</span><span class="n">portnum</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">portalt</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
        <span class="k">return</span> <span class="n">portalt</span>

    <span class="k">def</span> <span class="nf">_set_port_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls LJM method to write name values to LabJack</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ljm</span><span class="o">.</span><span class="n">eWriteNames</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">),</span> <span class="n">names</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_port_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls LJM method to read name values from LabJack</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">ljm</span><span class="o">.</span><span class="n">eReadNames</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commhandle</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">),</span> <span class="n">names</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">values</span>

    <span class="k">def</span> <span class="nf">_get_port_address</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets port addresses corresponding to the ports in NAMES from LabJack</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ljm</span><span class="o">.</span><span class="n">namesToAddresses</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">),</span> <span class="n">names</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span></div>


</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Eduardo Nigro.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>